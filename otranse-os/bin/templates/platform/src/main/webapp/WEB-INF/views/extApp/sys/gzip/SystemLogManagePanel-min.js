if(typeof Global==="undefined"){Global={}}if(!Global.sytemModuleLoader){Global.sytemModuleLoader=new Ext.tree.TreeLoader({url:"resource.java?cmd=getModules",listeners:{beforeload:function(b,a){b.baseParams.id=(a.id.indexOf("root")<0?a.id:"")}}})}SystemLogListPanel=Ext.extend(Disco.Ext.CrudPanel,{id:"systemLogListPanel",baseUrl:"systemLog.java",batchRemoveMode:true,exportData:true,pageSize:20,viewWin:{title:"\u93c3\u30e5\u7e54\u7487\ufe3d\u510f\u93cc\u30e7\u6e45",width:600,height:480},edit:function(){this.view()},createViewPanel:function(){var a=new Ext.form.FormPanel({frame:true,labelWidth:80,labelAlign:"right",items:[{xtype:"fieldset",title:"\u9369\u70d8\u6e70\u6dc7\u2103\u4f05",autoHeight:true,items:[{xtype:"hidden",name:"id"},{xtype:"labelfield",fieldLabel:"\u7ee0\ufffd\u6d60\ufffd",name:"desciption"},{xtype:"labelfield",name:"type",hiddenName:"type",fieldLabel:"\u74a7\u52ec\u7c2e\u7eeb\u8bf2\u7037"},{xtype:"labelfield",fieldLabel:"\u74a7\u52ec\u7c2e\u93bb\u5fda\u582a",name:"resStr"},{xtype:"labelfield",fieldLabel:"\u74a7\u52ec\u7c2e\u93bb\u5fda\u582a",name:"resStr"}]}]});return a},createWin:function(){return this.initWin(438,200,"\u7eef\u8364\u7cba\u74a7\u52ec\u7c2e\u7ee0\uff04\u608a")},storeMapping:["id","user","vdate","ip","action","cmd","types","params"],initComponent:function(){this.cm=new Ext.grid.ColumnModel([{header:"\u93c3\u5815\u68ff",sortable:true,width:100,dataIndex:"vdate",renderer:this.dateRender()},{header:"ip",sortable:true,width:80,dataIndex:"ip"},{header:"\u93bf\u5d84\u7d94\u6d5c\ufffd",sortable:true,width:60,dataIndex:"user",renderer:this.objectRender("name")},{header:"\u59af\u2033\u6f61",sortable:true,width:150,dataIndex:"action"},{header:"\u935b\u6212\u62a4",sortable:true,width:80,dataIndex:"cmd"},{header:"\u7eeb\u8bf2\u57c6",sortable:true,width:40,dataIndex:"types"}]);SystemLogListPanel.superclass.initComponent.call(this);this.hideOperaterItem("btn_add","btn_edit")}});SystemLogManagePanel=function(){this.list=new SystemLogListPanel({region:"center"});this.tree=new Ext.tree.TreePanel({title:"\u7eef\u8364\u7cba\u59af\u2033\u6f61",region:"west",autoScroll:true,collapseFirst:false,collapsible:true,split:true,width:250,tools:[{id:"refresh",handler:function(){this.tree.root.reload()},scope:this}],tools:[{id:"refresh",handler:function(){this.tree.root.reload()},scope:this}],root:new Ext.tree.AsyncTreeNode({id:"root",text:"\u93b5\ufffd\u93c8\u590b\u0101\u9367\ufffd",icon:"img/icons/root.gif",expanded:true,loader:Global.sytemModuleLoader})});this.tree.on("click",function(b,a){var c=(b.id!="root"?b.id:"");if(!b.isLeaf()&&b.id!="root"){this.list.pack=b.id;this.list.action=""}else{this.list.pack="";this.list.action=b.id=="root"?"":b.id}Ext.apply(this.list.store.baseParams,{action:this.list.action,pack:this.list.pack});this.list.store.removeAll();this.list.store.load()},this);SystemLogManagePanel.superclass.constructor.call(this,{id:"systemLogManagePanel",closable:true,autoScroll:true,border:false,layout:"border",items:[this.tree,this.list]})};Ext.extend(SystemLogManagePanel,Ext.Panel,{});
