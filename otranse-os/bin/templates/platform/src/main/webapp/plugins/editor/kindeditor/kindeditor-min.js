(function(O,t){function la(a){if(!a)return false;return Object.prototype.toString.call(a)==="[object Array]"}function qb(a){if(!a)return false;return Object.prototype.toString.call(a)==="[object Function]"}function ba(a,b){for(var c=0,d=b.length;c<d;c++)if(a===b[c])return c;return-1}function n(a,b){if(la(a))for(var c=0,d=a.length;c<d;c++){if(b.call(a[c],c,a[c])===false)break}else for(c in a)if(a.hasOwnProperty(c))if(b.call(a[c],c,a[c])===false)break}function P(a){return a.replace(/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,
"")}function rb(a,b,c){c=c===t?",":c;return(c+b+c).indexOf(c+a+c)>=0}function K(a,b){b=b||"px";return a&&/^\d+$/.test(a)?a+b:a}function L(a){var b;return a&&(b=/(\d+)/.exec(a))?parseInt(b[1],10):0}function Q(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Ha(a){return a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function sa(a){var b=a.split("-");a="";n(b,function(c,d){a+=c>0?d.charAt(0).toUpperCase()+
d.substr(1):d});return a}function Ia(a){function b(c){c=parseInt(c,10).toString(16).toUpperCase();return c.length>1?c:"0"+c}return a.replace(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/ig,function(c,d,e,f){return"#"+b(d)+b(e)+b(f)})}function M(a,b){b=b===t?",":b;var c={};a=la(a)?a:a.split(b);var d;n(a,function(e,f){if(d=/^(\d+)\.\.(\d+)$/.exec(f))for(e=parseInt(d[1],10);e<=parseInt(d[2],10);e++)c[e.toString()]=true;else c[f]=true});return c}function Ta(a,b){return Array.prototype.slice.call(a,
b||0)}function u(a,b){return a===t?b:a}function fc(a){return!a||/[<>"]/.test(a)}function gc(a,b){return a.indexOf("?")>=0?a+"&"+b:a+"?"+b}function T(a,b,c){if(!c){c=b;b=null}var d;if(b){var e=function(){};e.prototype=b.prototype;d=new e;n(c,function(f,h){d[f]=h})}else d=c;d.constructor=a;a.prototype=d;a.parent=b?b.prototype:null}function sb(a){var b;if(b=/\{[\s\S]*\}|\[[\s\S]*\]/.exec(a))a=b[0];b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
b.lastIndex=0;if(b.test(a))a=a.replace(b,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return eval("("+a+")");throw"JSON parse error";}function hc(){for(var a=document.getElementsByTagName("script"),b,c=0,d=a.length;c<d;c++){b=a[c].src||"";if(/kindeditor[\w\-\.]*\.js/.test(b))return b.substring(0,
b.lastIndexOf("/")+1)}return""}function ic(a,b,c){if(a.addEventListener)a.addEventListener(b,c,tb);else a.attachEvent&&a.attachEvent("on"+b,c)}function Ja(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,tb);else a.detachEvent&&a.detachEvent("on"+b,c)}function ub(a,b){this.init(a,b)}function Ua(a){return a[Ka]||null}function jc(a){a[Ka]=++vb;return vb}function wb(a){try{delete a[Ka]}catch(b){a.removeAttribute&&a.removeAttribute(Ka)}}function ma(a,b,c){if(b.indexOf(",")>=0)n(b.split(","),
function(){ma(a,this,c)});else{var d=Ua(a);d||(d=jc(a));if(N[d]===t)N[d]={};var e=N[d][b];if(e&&e.length>0)Ja(a,b,e[0]);else{N[d][b]=[];N[d].el=a}e=N[d][b];if(e.length===0)e[0]=function(f){var h=f?new ub(a,f):t;n(e,function(i,j){i>0&&j&&j.call(a,h)})};ba(c,e)<0&&e.push(c);ic(a,b,e[0])}}function ta(a,b,c){if(b&&b.indexOf(",")>=0)n(b.split(","),function(){ta(a,this,c)});else{var d=Ua(a);if(d)if(b===t){if(d in N){n(N[d],function(h,i){h!="el"&&i.length>0&&Ja(a,h,i[0])});delete N[d];wb(a)}}else if(N[d]){var e=
N[d][b];if(e&&e.length>0){if(c===t){Ja(a,b,e[0]);delete N[d][b]}else{n(e,function(h,i){h>0&&i===c&&e.splice(h,1)});if(e.length==1){Ja(a,b,e[0]);delete N[d][b]}}var f=0;n(N[d],function(){f++});if(f<2){delete N[d];wb(a)}}}}}function xb(a,b){if(b.indexOf(",")>=0)n(b.split(","),function(){xb(a,this)});else{var c=Ua(a);if(c){b=N[c][b];N[c]&&b&&b.length>0&&b[0]()}}}function Va(a,b,c){b=/^\d{2,}$/.test(b)?b:b.toUpperCase().charCodeAt(0);ma(a,"keydown",function(d){if(d.ctrlKey&&d.which==b&&!d.shiftKey&&!d.altKey){c.call(a);
d.stop()}})}function kc(a){function b(){if(!e){e=true;a(KindEditor)}}function c(){if(!e){try{document.documentElement.doScroll("left")}catch(i){setTimeout(c,100);return}b()}}function d(){document.readyState==="complete"&&b()}var e=false;if(document.addEventListener)ma(document,"DOMContentLoaded",b);else if(document.attachEvent){ma(document,"readystatechange",d);var f=false;try{f=O.frameElement==null}catch(h){}document.documentElement.doScroll&&f&&c()}ma(O,"load",b)}function ua(a){for(var b={},c=/\s*([\w\-]+)\s*:([^;]*)(;|$)/g,
d;d=c.exec(a);){var e=P(d[1].toLowerCase());d=P(Ia(d[2]));b[e]=d}return b}function Y(a){for(var b={},c=/\s+(?:([\w\-:]+)|(?:([\w\-:]+)=([^\s"'<>]+))|(?:([\w\-:"]+)="([^"]*)")|(?:([\w\-:"]+)='([^']*)'))(?=(?:\s|\/|>)+)/g,d;d=c.exec(a);){var e=(d[1]||d[2]||d[4]||d[6]).toLowerCase();b[e]=(d[2]?d[3]:d[4]?d[5]:d[7])||""}return b}function lc(a,b){return a=/\s+class\s*=/.test(a)?a.replace(/(\s+class=["']?)([^"']*)(["']?[\s>])/,function(c,d,e,f){return(" "+e+" ").indexOf(" "+b+" ")<0?e===""?d+b+f:d+e+" "+
b+f:c}):a.substr(0,a.length-1)+' class="'+b+'">'}function mc(a){var b="";n(ua(a),function(c,d){b+=c+":"+d+";"});return b}function va(a,b,c,d){function e(j){j=j.split("/");for(var k=[],m=0,l=j.length;m<l;m++){var r=j[m];if(r=="..")k.length>0&&k.pop();else r!==""&&r!="."&&k.push(r)}return"/"+k.join("/")}function f(j,k){if(a.substr(0,j.length)===j){for(var m=[],l=0;l<k;l++)m.push("..");k=".";if(m.length>0)k+="/"+m.join("/");if(d=="/")k+="/";return k+a.substr(j.length)}else if(i=/^(.*)\//.exec(j))return f(i[1],
++k)}b=u(b,"").toLowerCase();if(a.substr(0,5)!="data:")a=a.replace(/([^:])\/\//g,"$1/");if(ba(b,["absolute","relative","domain"])<0)return a;c=c||location.protocol+"//"+location.host;if(d===t){var h=location.pathname.match(/^(\/.*)\//);d=h?h[1]:""}var i;if(i=/^(\w+:\/\/[^\/]*)/.exec(a)){if(i[1]!==c)return a}else if(/^\w+:/.test(a))return a;if(/^\//.test(a))a=c+e(a.substr(1));else/^\w+:\/\//.test(a)||(a=c+e(d+"/"+a));if(b==="relative")a=f(c+d,0).substr(2);else if(b==="absolute")if(a.substr(0,c.length)===
c)a=a.substr(c.length);return a}function ga(a,b,c,d,e){c=c||"";d=u(d,false);e=u(e,"\t");var f="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(j,k,m,l){return k+m.replace(/<(?:br|br\s[^>]*)>/ig,"\n")+l});a=a.replace(/<(?:br|br\s[^>]*)\s*\/?>\s*<\/p>/ig,"</p>");a=a.replace(/(<(?:p|p\s[^>]*)>)\s*(<\/p>)/ig,"$1<br />$2");a=a.replace(/\u200B/g,"");a=a.replace(/\u00A9/g,"&copy;");var h={};if(b){n(b,function(j,k){j=j.split(",");
for(var m=0,l=j.length;m<l;m++)h[j[m]]=M(k)});h.script||(a=a.replace(/(<(?:script|script\s[^>]*)>)([\s\S]*?)(<\/script>)/ig,""));h.style||(a=a.replace(/(<(?:style|style\s[^>]*)>)([\s\S]*?)(<\/style>)/ig,""))}var i=[];a=a.replace(/([ \t\n\r]*)<(\/)?([\w\-:]+)((?:\s+|(?:\s+[\w\-:]+)|(?:\s+[\w\-:]+=[^\s"'<>]+)|(?:\s+[\w\-:"]+="[^"]*")|(?:\s+[\w\-:"]+='[^']*'))*)(\/)?>([ \t\n\r]*)/g,function(j,k,m,l,r,p,s){k=k||"";m=m||"";var w=l.toLowerCase(),H=r||"";l=p?" "+p:"";s=s||"";if(b&&!h[w])return"";if(l===
""&&yb[w])l=" /";if(zb[w]){if(k)k=" ";if(s)s=" "}if(Wa[w])if(m)s="\n";else k="\n";if(d&&w=="br")s="\n";if(Ab[w]&&!Wa[w])if(d){m&&i.length>0&&i[i.length-1]===w?i.pop():i.push(w);s=k="\n";r=0;for(p=m?i.length:i.length-1;r<p;r++){k+=e;m||(s+=e)}if(l)i.pop();else m||(s+=e)}else k=s="";if(H!==""){var o=Y(j);if(w==="font"){var C={},E="";n(o,function(z,F){if(z==="color"){C.color=F;delete o[z]}if(z==="size"){C["font-size"]=f[parseInt(F,10)-1]||"";delete o[z]}if(z==="face"){C["font-family"]=F;delete o[z]}if(z===
"style")E=F});if(E&&!/;$/.test(E))E+=";";n(C,function(z,F){if(F!==""){if(/\s/.test(F))F="'"+F+"'";E+=z+":"+F+";"}});o.style=E}n(o,function(z,F){if(nc[z])o[z]=z;if(ba(z,["src","href"])>=0)o[z]=va(F,c);if(b&&z!=="style"&&!h[w]["*"]&&!h[w][z]||w==="body"&&z==="contenteditable"||/^kindeditor_\d+$/.test(z))delete o[z];if(z==="style"&&F!==""){var V=ua(F);n(V,function(D){b&&!h[w].style&&!h[w]["."+D]&&delete V[D]});var v="";n(V,function(D,A){v+=D+":"+A+";"});o.style=v}});H="";n(o,function(z,F){if(!(z==="style"&&
F==="")){F=F.replace(/"/g,"&quot;");H+=" "+z+'="'+F+'"'}})}if(w==="font")w="span";return k+"<"+m+w+H+l+">"+s});a=a.replace(/(<(?:pre|pre\s[^>]*)>)([\s\S]*?)(<\/pre>)/ig,function(j,k,m,l){return k+m.replace(/\n/g,'<span id="__kindeditor_pre_newline__">\n')+l});a=a.replace(/\n\s*\n/g,"\n");a=a.replace(/<span id="__kindeditor_pre_newline__">\n/g,"\n");return P(a)}function Bb(a,b){a=a.replace(/<meta[\s\S]*?>/ig,"").replace(/<![\s\S]*?>/ig,"").replace(/<style[^>]*>[\s\S]*?<\/style>/ig,"").replace(/<script[^>]*>[\s\S]*?<\/script>/ig,
"").replace(/<w:[^>]+>[\s\S]*?<\/w:[^>]+>/ig,"").replace(/<o:[^>]+>[\s\S]*?<\/o:[^>]+>/ig,"").replace(/<xml>[\s\S]*?<\/xml>/ig,"").replace(/<(?:table|td)[^>]*>/ig,function(c){return c.replace(/border-bottom:([#\w\s]+)/ig,"border:$1")});return ga(a,b)}function Cb(a){if(/\.(rm|rmvb)(\?|$)/i.test(a))return"audio/x-pn-realaudio-plugin";if(/\.(swf|flv)(\?|$)/i.test(a))return"application/x-shockwave-flash";return"video/x-ms-asf-plugin"}function oc(a){if(/realaudio/i.test(a))return"ke-rm";if(/flash/i.test(a))return"ke-flash";
return"ke-media"}function Db(a){return Y(unescape(a))}function Xa(a){var b="<embed ";n(a,function(c,d){b+=c+'="'+d+'" '});b+="/>";return b}function Eb(a,b){var c=b.width,d=b.height,e=b.type||Cb(b.src);b=Xa(b);var f="";if(c>0)f+="width:"+c+"px;";if(d>0)f+="height:"+d+"px;";a='<img class="'+oc(e)+'" src="'+a+'" ';if(f!=="")a+='style="'+f+'" ';a+='data-ke-tag="'+escape(b)+'" alt="" />';return a}function pc(a,b){a=new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+
a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?a(b):a}function La(a,b){if(a.nodeType==9&&b.nodeType!=9)return true;for(;b=b.parentNode;)if(b==a)return true;return false}function Ma(a,b){b=b.toLowerCase();var c=null;if(!qc&&a.nodeName.toLowerCase()!="script"){var d=a.ownerDocument.createElement("div");d.appendChild(a.cloneNode(false));
a=Y(Ha(d.innerHTML));if(b in a)c=a[b]}else try{c=a.getAttribute(b,2)}catch(e){c=a.getAttribute(b,1)}if(b==="style"&&c!==null)c=mc(c);return c}function Na(a,b){function c(v){if(typeof v!="string")return v;return v.replace(/([^\w\-])/g,"\\$1")}function d(v){return v.replace(/\\/g,"")}function e(v,D){return v==="*"||v.toLowerCase()===c(D.toLowerCase())}function f(v,D,A){var q=[];(v=(A.ownerDocument||A).getElementById(d(v)))&&e(D,v.nodeName)&&La(A,v)&&q.push(v);return q}function h(v,D,A){var q=A.ownerDocument||
A,G=[],I,W,X;if(A.getElementsByClassName){q=A.getElementsByClassName(d(v));I=0;for(W=q.length;I<W;I++){X=q[I];e(D,X.nodeName)&&G.push(X)}}else if(q.querySelectorAll){q=q.querySelectorAll((A.nodeName!=="#document"?A.nodeName+" ":"")+D+"."+v);I=0;for(W=q.length;I<W;I++){X=q[I];La(A,X)&&G.push(X)}}else{q=A.getElementsByTagName(D);v=" "+v+" ";I=0;for(W=q.length;I<W;I++){X=q[I];if(X.nodeType==1)(D=X.className)&&(" "+D+" ").indexOf(v)>-1&&G.push(X)}}return G}function i(v,D,A){var q=[];v=(A.ownerDocument||
A).getElementsByName(d(v));for(var G,I=0,W=v.length;I<W;I++){G=v[I];e(D,G.nodeName)&&La(A,G)&&G.getAttributeNode("name")&&q.push(G)}return q}function j(v,D,A,q){var G=[];A=q.getElementsByTagName(A);for(var I=0,W=A.length;I<W;I++){q=A[I];if(q.nodeType==1)if(D===null)Ma(q,v)!==null&&G.push(q);else D===c(Ma(q,v))&&G.push(q)}return G}function k(v,D){var A=[],q,G=(q=/^((?:\\.|[^.#\s\[<>])+)/.exec(v))?q[1]:"*";if(q=/#((?:[\w\-]|\\.)+)$/.exec(v))A=f(q[1],G,D);else if(q=/\.((?:[\w\-]|\\.)+)$/.exec(v))A=h(q[1],
G,D);else if(q=/\[((?:[\w\-]|\\.)+)\]/.exec(v))A=j(q[1].toLowerCase(),null,G,D);else if(q=/\[((?:[\w\-]|\\.)+)\s*=\s*['"]?((?:\\.|[^'"]+)+)['"]?\]/.exec(v)){A=q[1].toLowerCase();q=q[2];A=A==="id"?f(q,G,D):A==="class"?h(q,G,D):A==="name"?i(q,G,D):j(A,q,G,D)}else{D=D.getElementsByTagName(G);q=0;for(v=D.length;q<v;q++){G=D[q];G.nodeType==1&&A.push(G)}}return A}var m=a.split(",");if(m.length>1){var l=[];n(m,function(){n(Na(this,b),function(){ba(this,l)<0&&l.push(this)})});return l}b=b||document;m=[];
for(var r,p=/((?:\\.|[^\s>])+|[\s>])/g;r=p.exec(a);)r[1]!==" "&&m.push(r[1]);a=[];if(m.length==1)return k(m[0],b);r=false;var s,w,H,o,C,E,z,F,V;C=0;for(lenth=m.length;C<lenth;C++){p=m[C];if(p===">")r=true;else{if(C>0){s=[];E=0;for(F=a.length;E<F;E++){H=a[E];w=k(p,H);z=0;for(V=w.length;z<V;z++){o=w[z];if(r)H===o.parentNode&&s.push(o);else s.push(o)}}a=s}else a=k(p,b);if(a.length===0)return[]}}return a}function rc(a,b){a=Na(a,b);return a.length>0?a[0]:null}function Z(a){return g(a)[0]}function ha(a){if(!a)return document;
return a.ownerDocument||a.document||a}function ia(a){if(!a)return O;a=ha(a);return a.parentWindow||a.defaultView}function sc(a,b){if(a.nodeType==1){var c=ha(a);try{a.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+b;var d=c.getElementById("__kindeditor_temp_tag__");d.parentNode.removeChild(d)}catch(e){g(a).empty();g("@"+b,c).each(function(){a.appendChild(this)})}}}function Ya(a,b){return rb(b,a.className," ")}function Za(a,b,c){if(B&&R<8&&b.toLowerCase()==
"class")b="className";a.setAttribute(b,""+c)}function tc(a,b){if(B&&R<8&&b.toLowerCase()=="class")b="className";Za(a,b,"");a.removeAttribute(b)}function Fb(a){if(!a||!a.nodeName)return"";return a.nodeName.toLowerCase()}function uc(a,b){var c=ia(a),d=sa(b),e="";if(c.getComputedStyle){c=c.getComputedStyle(a,null);e=c[d]||c.getPropertyValue(b)||a.style[d]}else if(a.currentStyle)e=a.currentStyle[d]||a.style[d];return e}function Gb(a){return!!vc[Fb(a)]}function U(a){a=a||document;return ca?a.body:a.documentElement}
function na(a){a=a||document;var b;if(B||$a){b=U(a).scrollLeft;a=U(a).scrollTop}else{b=ia(a).scrollX;a=ia(a).scrollY}return{x:b,y:a}}function S(a){this.init(a)}function Hb(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset;return a}function ab(a,b,c){function d(o,C,E){var z=o.nodeValue.length,F;if(b){F=o.cloneNode(true);F=C>0?F.splitText(C):F;E<z&&F.splitText(E-C)}if(c){var V=o;if(C>0){V=o.splitText(C);a.setStart(o,C)}if(E<z){o=V.splitText(E-C);a.setEnd(o,0)}i.push(V)}return F}
function e(){c&&a.up().collapse(true);for(var o=0,C=i.length;o<C;o++){var E=i[o];E.parentNode&&E.parentNode.removeChild(E)}}function f(o,C){o=o.firstChild;for(var E;o;){E=(new $(h)).selectNode(o);k=E.compareBoundaryPoints(wa,a);if(k>=0&&m<=0)m=E.compareBoundaryPoints(xa,a);if(m>=0&&l<=0)l=E.compareBoundaryPoints(oa,a);if(l>=0&&r<=0)r=E.compareBoundaryPoints(ya,a);if(r>=0)return false;E=o.nextSibling;if(k>0)if(o.nodeType==1)if(m>=0&&l<=0){b&&C.appendChild(o.cloneNode(true));c&&i.push(o)}else{var z;
if(b){z=o.cloneNode(false);C.appendChild(z)}if(f(o,z)===false)return false}else if(o.nodeType==3){o=o==j.startContainer?d(o,j.startOffset,o.nodeValue.length):o==j.endContainer?d(o,0,j.endOffset):d(o,0,o.nodeValue.length);if(b)try{C.appendChild(o)}catch(F){}}o=E}}var h=a.doc,i=[],j=a.cloneRange().down(),k=-1,m=-1,l=-1,r=-1,p=a.commonAncestor(),s=h.createDocumentFragment();if(p.nodeType==3){p=d(p,a.startOffset,a.endOffset);b&&s.appendChild(p);e();return b?s:a}f(p,s);c&&a.up().collapse(true);p=0;for(var w=
i.length;p<w;p++){var H=i[p];H.parentNode&&H.parentNode.removeChild(H)}return b?s:a}function za(a,b){for(var c=b;c;){var d=g(c);if(d.name=="marquee"||d.name=="select")return;c=c.parentNode}try{a.moveToElementText(b)}catch(e){}}function Ib(a,b){var c=a.parentElement().ownerDocument,d=a.duplicate();d.collapse(b);var e=d.parentElement(),f=e.childNodes;if(f.length===0)return{node:e.parentNode,offset:g(e).index()};b=c;var h=0,i=-1,j=a.duplicate();za(j,e);for(var k=0,m=f.length;k<m;k++){var l=f[k];i=j.compareEndPoints("StartToStart",
d);if(i===0)return{node:l.parentNode,offset:k};if(l.nodeType==1){var r=a.duplicate(),p,s=g(l),w=l;if(s.isControl()){p=c.createElement("span");s.after(p);w=p;h+=s.text().replace(/\r\n|\n|\r/g,"").length}za(r,w);j.setEndPoint("StartToEnd",r);if(i>0)h+=r.text.replace(/\r\n|\n|\r/g,"").length;else h=0;p&&g(p).remove()}else if(l.nodeType==3){j.moveStart("character",l.nodeValue.length);h+=l.nodeValue.length}if(i<0)b=l}if(i<0&&b.nodeType==1)return{node:e,offset:g(e.lastChild).index()+1};if(i>0)for(;b.nextSibling&&
b.nodeType==1;)b=b.nextSibling;j=a.duplicate();za(j,e);j.setEndPoint("StartToEnd",d);h-=j.text.replace(/\r\n|\n|\r/g,"").length;if(i>0&&b.nodeType==3)for(a=b.previousSibling;a&&a.nodeType==3;){h-=a.nodeValue.length;a=a.previousSibling}return{node:b,offset:h}}function Jb(a,b){var c=a.ownerDocument||a,d=c.body.createTextRange();if(c==a){d.collapse(true);return d}if(a.nodeType==1&&a.childNodes.length>0){a=a.childNodes;var e,f;if(b===0){f=a[0];e=true}else{f=a[b-1];e=false}if(!f)return d;if(g(f).name===
"head"){if(b===1)e=true;if(b===2)e=false;d.collapse(e);return d}if(f.nodeType==1){b=g(f);var h;if(b.isControl()){h=c.createElement("span");e?b.before(h):b.after(h);f=h}za(d,f);d.collapse(e);h&&g(h).remove();return d}a=f;b=e?0:f.nodeValue.length}c=c.createElement("span");g(a).before(c);za(d,c);d.moveStart("character",b);g(c).remove();return d}function Kb(a){function b(e){if(g(e.node).name=="tr"){e.node=e.node.cells[e.offset];e.offset=0}}var c;if(B){if(a.item){c=ha(a.item(0));c=new $(c);c.selectNode(a.item(0));
return c}c=a.parentElement().ownerDocument;var d=Ib(a,true);a=Ib(a,false);b(d);b(a);c=new $(c);c.setStart(d.node,d.offset);c.setEnd(a.node,a.offset);return c}d=a.startContainer;c=d.ownerDocument||d;c=new $(c);c.setStart(d,a.startOffset);c.setEnd(a.endContainer,a.endOffset);return c}function $(a){this.init(a)}function bb(a){if(!a.nodeName)return a.constructor===$?a:Kb(a);return new $(a)}function da(a,b,c){try{a.execCommand(b,false,c)}catch(d){}}function Lb(a,b){var c="";try{c=a.queryCommandValue(b)}catch(d){}if(typeof c!==
"string")c="";return c}function cb(a){var b=ia(a);return a.selection||b.getSelection()}function wc(a){var b=cb(a),c;try{c=b.rangeCount>0?b.getRangeAt(0):b.createRange()}catch(d){}if(B&&(!c||!c.item&&c.parentElement().ownerDocument!==a))return null;return c}function Mb(a){var b={},c,d;n(a,function(e,f){c=e.split(",");e=0;for(var h=c.length;e<h;e++){d=c[e];b[d]=f}});return b}function db(a,b){return Nb(a,b,"*")||Nb(a,b)}function Nb(a,b,c){c=c||a.name;if(a.type!==1)return false;b=Mb(b);if(!b[c])return false;
c=b[c].split(",");b=0;for(var d=c.length;b<d;b++){var e=c[b];if(e==="*")return true;var f=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(e),h=f[1]?"css":"attr";e=f[2];f=f[3]||"";if(f===""&&a[h](e)!=="")return true;if(f!==""&&a[h](e)===f)return true}return false}function eb(a,b){if(a.type==1){Ob(a,b,"*");Ob(a,b)}}function Ob(a,b,c){c=c||a.name;if(a.type===1){b=Mb(b);if(b[c]){c=b[c].split(",");b=false;for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f==="*"){b=true;break}var h=/^(\.?)([^=]+)(?:=([^=]*))?$/.exec(f);
f=h[2];if(h[1]){f=sa(f);if(a[0].style[f])a[0].style[f]=""}else a.removeAttr(f)}b&&a.remove(true)}}}function fb(a){for(a=a;a.first();)a=a.first();return a}function pa(a){return a.type==1&&a.html().replace(/<[^>]+>/g,"")===""}function xc(a,b){a=a.clone(true);for(var c=fb(a),d=a,e=false;b;){for(;d;){if(d.name===b.name){yc(d,b.attr(),b.css());e=true}d=d.first()}e||c.append(b.clone(false));e=false;b=b.first()}return a}function zc(a,b){b=b.clone(true);if(a.type==3){fb(b).append(a.clone(false));a.replaceWith(b);
return b}for(var c=a,d;(d=a.first())&&d.children().length==1;)a=d;d=a.first();for(a=a.doc.createDocumentFragment();d;){a.appendChild(d[0]);d=d.next()}b=xc(c,b);a.firstChild&&fb(b).append(a);c.replaceWith(b);return b}function yc(a,b,c){n(b,function(d,e){d!=="style"&&a.attr(d,e)});n(c,function(d,e){a.css(d,e)})}function Ac(a){for(;a&&a.name!="body";){if(Wa[a.name]||a.name=="div"&&a.hasClass("ke-script"))return true;a=a.parent()}return false}function Aa(a){this.init(a)}function Pb(a){if(a.nodeName){a=
ha(a);a=bb(a).selectNodeContents(a.body).collapse(false)}return new Aa(a)}function gb(a){var b=a.moveEl,c=a.moveFn,d=a.clickEl||b,e=a.beforeDrag,f=[document];(a.iframeFix===t?true:a.iframeFix)&&g("iframe").each(function(){if(!/^https?:\/\//.test(va(this.src||"","absolute"))){var h;try{h=hb(this)}catch(i){}if(h){var j=g(this).pos();g(h).data("pos-x",j.x);g(h).data("pos-y",j.y);f.push(h)}}});d.mousedown(function(h){function i(o){o.preventDefault();var C=g(ha(o.target)),E=ea((C.data("pos-x")||0)+o.pageX-
w);o=ea((C.data("pos-y")||0)+o.pageY-H);c.call(d,l,r,p,s,E,o)}function j(o){o.preventDefault()}function k(o){o.preventDefault();g(f).unbind("mousemove",i).unbind("mouseup",k).unbind("selectstart",j);m.releaseCapture&&m.releaseCapture()}h.stopPropagation();var m=d.get(),l=L(b.css("left")),r=L(b.css("top")),p=b.width(),s=b.height(),w=h.pageX,H=h.pageY;e&&e();g(f).mousemove(i).mouseup(k).bind("selectstart",j);m.setCapture&&m.setCapture()})}function fa(a){this.init(a)}function ib(a){return new fa(a)}
function hb(a){a=Z(a);return a.contentDocument||a.contentWindow.document}function Bc(a,b,c,d){var e=[jb===""?"<html>":'<html dir="'+jb+'">','<head><meta charset="utf-8" /><title></title>',"<style>","html {margin:0;padding:0;}","body {margin:0;padding:5px;}",'body, td {font:12px/1.5 "sans serif",tahoma,verdana,helvetica;}',"body, p, div {word-wrap: break-word;}","p {margin:5px 0;}","table {border-collapse:collapse;}","img {border:0;}","noscript {display:none;}","table.ke-zeroborder td {border:1px dotted #AAA;}",
"img.ke-flash {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/flash.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-rm {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/rm.gif);","\tbackground-position:center center;","\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-media {","\tborder:1px solid #AAA;","\tbackground-image:url("+a+"common/media.gif);","\tbackground-position:center center;",
"\tbackground-repeat:no-repeat;","\twidth:100px;","\theight:100px;","}","img.ke-anchor {","\tborder:1px dashed #666;","\twidth:16px;","\theight:16px;","}",".ke-script, .ke-noscript {","\tdisplay:none;","\tfont-size:0;","\twidth:0;","\theight:0;","}",".ke-pagebreak {","\tborder:1px dotted #AAA;","\tfont-size:0;","\theight:2px;","}","</style>"];la(c)||(c=[c]);n(c,function(f,h){h&&e.push('<link href="'+h+'" rel="stylesheet" />')});d&&e.push("<style>"+d+"</style>");e.push("</head><body "+(b?'class="'+
b+'"':"")+"></body></html>");return e.join("\n")}function Ba(a,b){if(a.hasVal()){if(b===t){a=a.val();return a=a.replace(/(<(?:p|p\s[^>]*)>) *(<\/p>)/ig,"")}return a.val(b)}return a.html(b)}function Ca(a){this.init(a)}function Qb(a){return new Ca(a)}function Rb(a,b){if(a=this.get(a))a.hasClass("ke-disabled")||b(a)}function Oa(a){this.init(a)}function Sb(a){return new Oa(a)}function Da(a){this.init(a)}function kb(a){return new Da(a)}function Ea(a){this.init(a)}function Tb(a){return new Ea(a)}function lb(a){this.init(a)}
function Cc(a){return new lb(a)}function Dc(a){a=a||{};var b=a.name||"",c=g('<span class="ke-button-common ke-button-outer" title="'+b+'"></span>');b=g('<input class="ke-button-common ke-button" type="button" value="'+b+'" />');a.click&&b.click(a.click);c.append(b);return c}function Fa(a){this.init(a)}function Ub(a){return new Fa(a)}function Ec(a){var b=ib(a),c=b.remove,d=a.afterSelect;a=b.div;var e=[];a.addClass("ke-tabs").bind("contextmenu,mousedown,mousemove",function(h){h.preventDefault()});var f=
g('<ul class="ke-tabs-ul ke-clearfix"></ul>');a.append(f);b.add=function(h){var i=g('<li class="ke-tabs-li">'+h.title+"</li>");i.data("tab",h);e.push(i);f.append(i)};b.selectedIndex=0;b.select=function(h){b.selectedIndex=h;n(e,function(i,j){j.unbind();if(i===h){j.addClass("ke-tabs-li-selected");g(j.data("tab").panel).show("")}else{j.removeClass("ke-tabs-li-selected").removeClass("ke-tabs-li-on").mouseover(function(){g(this).addClass("ke-tabs-li-on")}).mouseout(function(){g(this).removeClass("ke-tabs-li-on")}).click(function(){b.select(i)});
g(j.data("tab").panel).hide()}});d&&d.call(b,h)};b.remove=function(){n(e,function(){this.remove()});f.remove();c.call(b)};return b}function mb(a,b){var c=document.getElementsByTagName("head")[0]||(ca?document.body:document.documentElement),d=document.createElement("script");c.appendChild(d);d.src=a;d.charset="utf-8";d.onload=d.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"){b&&b();d.onload=d.onreadystatechange=null;c.removeChild(d)}}}function Vb(a){var b=a.indexOf("?");
return b>0?a.substr(0,b):a}function nb(a){for(var b=document.getElementsByTagName("head")[0]||(ca?document.body:document.documentElement),c=document.createElement("link"),d=Vb(va(a,"absolute")),e=g('link[rel="stylesheet"]',b),f=0,h=e.length;f<h;f++)if(Vb(va(e[f].href,"absolute"))===d)return;b.appendChild(c);c.href=a;c.rel="stylesheet"}function Fc(a,b,c,d,e){c=c||"GET";e=e||"json";var f=O.XMLHttpRequest?new O.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");f.open(c,a,true);f.onreadystatechange=
function(){if(f.readyState==4&&f.status==200)if(b){var j=P(f.responseText);if(e=="json")j=sb(j);b(j)}};if(c=="POST"){var h=[];n(d,function(j,k){h.push(encodeURIComponent(j)+"="+encodeURIComponent(k))});try{f.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(i){}f.send(h.join("&"))}else f.send(null)}function Wb(a,b){if(a===t)return ja;if(!b)return ja[a];ja[a]=b}function Xb(a){var b,c="core";if(b=/^(\w+)\.(\w+)$/.exec(a)){c=b[1];a=b[2]}return{ns:c,key:a}}function Yb(a,b){b=
b===t?g.options.langType:b;if(typeof a==="string"){if(!aa[b])return"no language";var c=a.length-1;if(a.substr(c)===".")return aa[b][a.substr(0,c)];a=Xb(a);return aa[b][a.ns][a.key]}n(a,function(d,e){d=Xb(d);aa[b]||(aa[b]={});aa[b][d.ns]||(aa[b][d.ns]={});aa[b][d.ns][d.key]=e})}function Pa(a,b){if(!a.collapsed){a=a.cloneRange().up();var c=a.startContainer,d=a.startOffset;if(qa||a.isControl()){a=g(c.childNodes[d]);if(!(!a||a.name!="img"))if(b(a))return a}}}function Gc(){var a=this;g(a.edit.doc).contextmenu(function(b){a.menu&&
a.hideMenu();if(a.useContextmenu){if(a._contextmenus.length!==0){var c=0,d=[];for(n(a._contextmenus,function(){if(this.title=="-")d.push(this);else if(this.cond&&this.cond()){d.push(this);if(this.width&&this.width>c)c=this.width}});d.length>0&&d[0].title=="-";)d.shift();for(;d.length>0&&d[d.length-1].title=="-";)d.pop();var e=null;n(d,function(j){this.title=="-"&&e.title=="-"&&delete d[j];e=this});if(d.length>0){b.preventDefault();var f=g(a.edit.iframe).pos(),h=kb({x:f.x+b.clientX,y:f.y+b.clientY,
width:c,css:{visibility:"hidden"},shadowMode:a.shadowMode});n(d,function(){this.title&&h.addItem(this)});f=U(h.doc);var i=h.div.height();b.clientY+i>=f.clientHeight-100&&h.pos(h.x,L(h.y)-i);h.div.css("visibility","visible");a.menu=h}}}else b.preventDefault()})}function Hc(){function a(h){for(h=g(h.commonAncestor());h;){if(h.type==1&&!h.isStyle())break;h=h.parent()}return h.name}var b=this,c=b.edit.doc,d=b.newlineTag;if(!(B&&d!=="br"))if(!(ra&&R<3&&d!=="p"))if(!($a&&R<9)){var e=M("h1,h2,h3,h4,h5,h6,pre,li"),
f=M("p,h1,h2,h3,h4,h5,h6,pre,li,blockquote");g(c).keydown(function(h){if(!(h.which!=13||h.shiftKey||h.ctrlKey||h.altKey)){b.cmd.selection();var i=a(b.cmd.range);if(!(i=="marquee"||i=="select"))if(d==="br"&&!e[i]){h.preventDefault();b.insertHtml("<br />"+(B&&R<9?"":"\u200b"))}else f[i]||da(c,"formatblock","<p>")}});g(c).keyup(function(h){if(!(h.which!=13||h.shiftKey||h.ctrlKey||h.altKey))if(d!="br")if(ra){h=b.cmd.commonAncestor("p");var i=b.cmd.commonAncestor("a");if(i.text()==""){i.remove(true);b.cmd.range.selectNodeContents(h[0]).collapse(true);
b.cmd.select()}}else{b.cmd.selection();h=a(b.cmd.range);if(!(h=="marquee"||h=="select")){f[h]||da(c,"formatblock","<p>");if(h=b.cmd.commonAncestor("div")){i=g("<p></p>");for(var j=h[0].firstChild;j;){var k=j.nextSibling;i.append(j);j=k}h.before(i);h.remove();b.cmd.range.selectNodeContents(i[0]);b.cmd.select()}}}})}}function Ic(){var a=this,b=a.edit.doc;g(b).keydown(function(c){if(c.which==9){c.preventDefault();if(a.afterTab)a.afterTab.call(a,c);else{c=a.cmd;var d=c.range;d.shrink();if(d.collapsed&&
d.startContainer.nodeType==1){d.insertNode(g("@&nbsp;",b)[0]);c.select()}a.insertHtml("&nbsp;&nbsp;&nbsp;&nbsp;")}}})}function Jc(){var a=this;g(a.edit.textarea[0],a.edit.win).focus(function(b){a.afterFocus&&a.afterFocus.call(a,b)}).blur(function(b){a.afterBlur&&a.afterBlur.call(a,b)})}function ka(a){return P(a.replace(/<span [^>]*id="?__kindeditor_bookmark_\w+_\d+__"?[^>]*><\/span>/ig,""))}function ob(a){return a.replace(/<div[^>]+class="?__kindeditor_paste__"?[^>]*>[\s\S]*?<\/div>/ig,"")}function Zb(a,
b){if(a.length===0)a.push(b);else{var c=a[a.length-1];ka(b.html)!==ka(c.html)&&a.push(b)}}function $b(a,b){var c=this.edit,d=c.doc.body,e,f;if(a.length===0)return this;if(c.designMode){e=this.cmd.range;f=e.createBookmark(true);f.html=d.innerHTML}else f={html:d.innerHTML};Zb(b,f);b=a.pop();if(ka(f.html)===ka(b.html)&&a.length>0)b=a.pop();if(c.designMode){c.html(b.html);if(b.start){e.moveToBookmark(b);this.select()}}else g(d).html(ka(b.html));return this}function Ga(a){function b(e,f){if(Ga.prototype[e]===
t)c[e]=f;c.options[e]=f}var c=this;c.options={};n(a,function(e){b(e,a[e])});n(g.options,function(e,f){c[e]===t&&b(e,f)});var d=g(c.srcElement||"<textarea/>");if(!c.width)c.width=d[0].style.width||d.width();if(!c.height)c.height=d[0].style.height||d.height();b("width",u(c.width,c.minWidth));b("height",u(c.height,c.minHeight));b("width",K(c.width));b("height",K(c.height));if(Kc&&(!Lc||R<534))c.designMode=false;c.srcElement=d;c.initContent="";c.plugin={};c.isCreated=false;c.isLoading=false;c._handlers=
{};c._contextmenus=[];c._undoStack=[];c._redoStack=[];c._calledPlugins={};c._firstAddBookmark=true;c.menu=c.contextmenu=null;c.dialogs=[]}function Mc(a){return new Ga(a)}function ac(a,b){function c(f){n(ja,function(h,i){i.call(f,KindEditor)});return f.create()}b=b||{};b.basePath=u(b.basePath,g.basePath);b.themesPath=u(b.themesPath,b.basePath+"themes/");b.langPath=u(b.langPath,b.basePath+"lang/");b.pluginsPath=u(b.pluginsPath,b.basePath+"plugins/");if(u(b.loadStyleMode,g.options.loadStyleMode)){var d=
u(b.themeType,g.options.themeType);nb(b.themesPath+"default/default.css");nb(b.themesPath+d+"/"+d+".css")}a=g(a);if(!(!a||a.length===0)){if(a.length>1){a.each(function(){ac(this,b)});return _instances[0]}b.srcElement=a[0];var e=new Ga(b);_instances.push(e);if(aa[e.langType])return c(e);mb(e.langPath+e.langType+".js?ver="+encodeURIComponent(g.DEBUG?Qa:Ra),function(){c(e)});return e}}function bc(a,b){g(a).each(function(c,d){g.each(_instances,function(e,f){if(f&&f.srcElement[0]==d){b.call(f,e,f);return false}})})}
if(!O.KindEditor){if(!O.console)O.console={};if(!console.log)console.log=function(){};var Ra="4.1.4 (2012-11-11)",J=navigator.userAgent.toLowerCase(),B=J.indexOf("msie")>-1&&J.indexOf("opera")==-1,ra=J.indexOf("gecko")>-1&&J.indexOf("khtml")==-1,qa=J.indexOf("applewebkit")>-1,$a=J.indexOf("opera")>-1,Kc=J.indexOf("mobile")>-1,Lc=/ipad|iphone|ipod/.test(J),ca=document.compatMode!="CSS1Compat",R=(J=/(?:msie|firefox|webkit|opera)[\/:\s](\d+)/.exec(J))?J[1]:"0",Qa=(new Date).getTime(),ea=Math.round,g=
{DEBUG:false,VERSION:Ra,IE:B,GECKO:ra,WEBKIT:qa,OPERA:$a,V:R,TIME:Qa,each:n,isArray:la,isFunction:qb,inArray:ba,inString:rb,trim:P,addUnit:K,removeUnit:L,escape:Q,unescape:Ha,toCamel:sa,toHex:Ia,toMap:M,toArray:Ta,undef:u,invalidUrl:fc,addParam:gc,extend:T,json:sb},zb=M("a,abbr,acronym,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,img,input,ins,kbd,label,map,q,s,samp,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),Ab=M("address,applet,blockquote,body,center,dd,dir,div,dl,dt,fieldset,form,frameset,h1,h2,h3,h4,h5,h6,head,hr,html,iframe,ins,isindex,li,map,menu,meta,noframes,noscript,object,ol,p,pre,script,style,table,tbody,td,tfoot,th,thead,title,tr,ul"),
yb=M("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),cc=M("b,basefont,big,del,em,font,i,s,small,span,strike,strong,sub,sup,u"),Nc=M("img,table,input,textarea,button"),Wa=M("pre,style,script"),Sa=M("html,head,body,td,tr,table,ol,ul,li");M("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");var nc=M("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),vc=M("input,button,textarea,select");g.basePath=hc();g.options={designMode:true,
fullscreenMode:false,filterMode:true,wellFormatMode:true,shadowMode:true,loadStyleMode:true,basePath:g.basePath,themesPath:g.basePath+"themes/",langPath:g.basePath+"lang/",pluginsPath:g.basePath+"plugins/",themeType:"default",langType:"zh_CN",urlType:"",newlineTag:"p",resizeType:2,syncType:"form",pasteType:2,dialogAlignType:"page",useContextmenu:true,fullscreenShortcut:false,bodyClass:"ke-content",indentChar:"\t",cssPath:"",cssData:"",minWidth:650,minHeight:100,minChangeSize:50,items:["source","|",
"undo","redo","|","preview","print","template","code","cut","copy","paste","plainpaste","wordpaste","|","justifyleft","justifycenter","justifyright","justifyfull","insertorderedlist","insertunorderedlist","indent","outdent","subscript","superscript","clearhtml","quickformat","selectall","|","fullscreen","/","formatblock","fontname","fontsize","|","forecolor","hilitecolor","bold","italic","underline","strikethrough","lineheight","removeformat","|","image","multiimage","flash","media","insertfile",
"table","hr","emoticons","baidumap","pagebreak","anchor","link","unlink","|","about"],noDisableItems:["source","fullscreen"],colorTable:[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4","#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]],fontSizeTable:["9px","10px","12px","14px","16px","18px","24px","32px"],htmlTags:{font:["id","class","color","size",
"face",".background-color"],span:["id","class",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".line-height"],div:["id","class","align",".border",".margin",".padding",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".background",".font-style",".text-decoration",".vertical-align",".margin-left"],table:["id","class","border","cellspacing","cellpadding","width","height","align",
"bordercolor",".padding",".margin",".border","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".background",".width",".height",".border-collapse"],"td,th":["id","class","align","valign","width","height","colspan","rowspan","bgcolor",".text-align",".color",".background-color",".font-size",".font-family",".font-weight",".font-style",".text-decoration",".vertical-align",".background",".border"],a:["id","class","href","target",
"name"],embed:["id","class","src","width","height","type","loop","autostart","quality",".width",".height","align","allowscriptaccess"],img:["id","class","src","width","height","border","alt","title","align",".width",".height",".border"],"p,ol,ul,li,blockquote,h1,h2,h3,h4,h5,h6":["id","class","align",".text-align",".color",".background-color",".font-size",".font-family",".background",".font-weight",".font-style",".text-decoration",".vertical-align",".text-indent",".margin-left"],pre:["id","class"],
hr:["id","class",".page-break-after"],"br,tbody,tr,strong,b,sub,sup,em,i,u,strike,s,del":["id","class"],iframe:["id","class","src","frameborder","width","height",".width",".height"]},layout:'<div class="container"><div class="toolbar"></div><div class="edit"></div><div class="statusbar"></div></div>'};var tb=false,dc=M("8,9,13,32,46,48..57,59,61,65..90,106,109..111,188,190..192,219..222");J=M("33..40");var pb={};n(dc,function(a,b){pb[a]=b});n(J,function(a,b){pb[a]=b});var Oc="altKey,attrChange,attrName,bubbles,button,cancelable,charCode,clientX,clientY,ctrlKey,currentTarget,data,detail,eventPhase,fromElement,handler,keyCode,metaKey,newValue,offsetX,offsetY,originalTarget,pageX,pageY,prevValue,relatedNode,relatedTarget,screenX,screenY,shiftKey,srcElement,target,toElement,view,wheelDelta,which".split(",");
T(ub,{init:function(a,b){var c=this,d=a.ownerDocument||a.document||a;c.event=b;n(Oc,function(e,f){c[f]=b[f]});if(!c.target)c.target=c.srcElement||d;if(c.target.nodeType===3)c.target=c.target.parentNode;if(!c.relatedTarget&&c.fromElement)c.relatedTarget=c.fromElement===c.target?c.toElement:c.fromElement;if(c.pageX==null&&c.clientX!=null){a=d.documentElement;d=d.body;c.pageX=c.clientX+(a&&a.scrollLeft||d&&d.scrollLeft||0)-(a&&a.clientLeft||d&&d.clientLeft||0);c.pageY=c.clientY+(a&&a.scrollTop||d&&d.scrollTop||
0)-(a&&a.clientTop||d&&d.clientTop||0)}if(!c.which&&(c.charCode||c.charCode===0?c.charCode:c.keyCode))c.which=c.charCode||c.keyCode;if(!c.metaKey&&c.ctrlKey)c.metaKey=c.ctrlKey;if(!c.which&&c.button!==t)c.which=c.button&1?1:c.button&2?3:c.button&4?2:0;switch(c.which){case 186:c.which=59;break;case 187:case 107:case 43:c.which=61;break;case 189:case 45:c.which=109;break;case 42:c.which=106;break;case 47:c.which=111;break;case 78:c.which=110;break}if(c.which>=96&&c.which<=105)c.which-=48},preventDefault:function(){var a=
this.event;a.preventDefault&&a.preventDefault();a.returnValue=false},stopPropagation:function(){var a=this.event;a.stopPropagation&&a.stopPropagation();a.cancelBubble=true},stop:function(){this.preventDefault();this.stopPropagation()}});var Ka="kindeditor_"+Qa,vb=0,N={};B&&O.attachEvent("onunload",function(){n(N,function(a,b){b.el&&ta(b.el)})});g.ctrl=Va;g.ready=kc;g.formatUrl=va;g.formatHtml=ga;g.getCssList=ua;g.getAttrList=Y;g.mediaType=Cb;g.mediaAttrs=Db;g.mediaEmbed=Xa;g.mediaImg=Eb;g.clearMsWord=
Bb;g.tmpl=pc;J=document.createElement("div");J.setAttribute("className","t");var qc=J.className!=="t";g.query=rc;g.queryAll=Na;T(S,{init:function(a){a=la(a)?a:[a];for(var b=0,c=0,d=a.length;c<d;c++)if(a[c]){this[c]=a[c].constructor===S?a[c][0]:a[c];b++}this.length=b;this.doc=ha(this[0]);this.name=Fb(this[0]);this.type=this.length>0?this[0].nodeType:null;this.win=ia(this[0])},each:function(a){for(var b=0;b<this.length;b++)if(a.call(this[b],b,this[b])===false)return this;return this},bind:function(a,
b){this.each(function(){ma(this,a,b)});return this},unbind:function(a,b){this.each(function(){ta(this,a,b)});return this},fire:function(a){if(this.length<1)return this;xb(this[0],a);return this},hasAttr:function(a){if(this.length<1)return false;return!!Ma(this[0],a)},attr:function(a,b){var c=this;if(a===t)return Y(c.outer());if(typeof a==="object"){n(a,function(d,e){c.attr(d,e)});return c}if(b===t){b=c.length<1?null:Ma(c[0],a);return b===null?"":b}c.each(function(){Za(this,a,b)});return c},removeAttr:function(a){this.each(function(){tc(this,
a)});return this},get:function(a){if(this.length<1)return null;return this[a||0]},eq:function(a){if(this.length<1)return null;return this[a]?new S(this[a]):null},hasClass:function(a){if(this.length<1)return false;return Ya(this[0],a)},addClass:function(a){this.each(function(){if(!Ya(this,a))this.className=P(this.className+" "+a)});return this},removeClass:function(a){this.each(function(){if(Ya(this,a))this.className=P(this.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))});return this},html:function(a){if(a===
t){if(this.length<1||this.type!=1)return"";return ga(this[0].innerHTML)}this.each(function(){sc(this,a)});return this},text:function(){if(this.length<1)return"";return B?this[0].innerText:this[0].textContent},hasVal:function(){if(this.length<1)return false;return Gb(this[0])},val:function(a){if(a===t){if(this.length<1)return"";return this.hasVal()?this[0].value:this.attr("value")}else{this.each(function(){if(Gb(this))this.value=a;else Za(this,"value",a)});return this}},css:function(a,b){var c=this;
if(a===t)return ua(c.attr("style"));if(typeof a==="object"){n(a,function(d,e){c.css(d,e)});return c}if(b===t){if(c.length<1)return"";return c[0].style[sa(a)]||uc(c[0],a)||""}c.each(function(){this.style[sa(a)]=b});return c},width:function(a){if(a===t){if(this.length<1)return 0;return this[0].offsetWidth}return this.css("width",K(a))},height:function(a){if(a===t){if(this.length<1)return 0;return this[0].offsetHeight}return this.css("height",K(a))},opacity:function(a){this.each(function(){if(this.style.opacity===
t)this.style.filter=a==1?"":"alpha(opacity="+a*100+")";else this.style.opacity=a==1?"":a});return this},data:function(a,b){a="kindeditor_data_"+a;if(b===t){if(this.length<1)return null;return this[0][a]}this.each(function(){this[a]=b});return this},pos:function(){var a=this[0],b=0,c=0;if(a)if(a.getBoundingClientRect){a=a.getBoundingClientRect();c=na(this.doc);b=a.left+c.x;c=a.top+c.y}else for(;a;){b+=a.offsetLeft;c+=a.offsetTop;a=a.offsetParent}return{x:ea(b),y:ea(c)}},clone:function(a){if(this.length<
1)return new S([]);return new S(this[0].cloneNode(a))},append:function(a){this.each(function(){this.appendChild&&this.appendChild(Z(a))});return this},appendTo:function(a){this.each(function(){Z(a).appendChild(this)});return this},before:function(a){this.each(function(){this.parentNode.insertBefore(Z(a),this)});return this},after:function(a){this.each(function(){this.nextSibling?this.parentNode.insertBefore(Z(a),this.nextSibling):this.parentNode.appendChild(Z(a))});return this},replaceWith:function(a){var b=
[];this.each(function(c,d){ta(d);c=Z(a);d.parentNode.replaceChild(c,d);b.push(c)});return g(b)},empty:function(){this.each(function(a,b){for(a=b.firstChild;a;){if(!b.parentNode)return;var c=a.nextSibling;a.parentNode.removeChild(a);a=c}});return this},remove:function(a){var b=this;b.each(function(c,d){if(d.parentNode){ta(d);if(a)for(var e=d.firstChild;e;){var f=e.nextSibling;d.parentNode.insertBefore(e,d);e=f}d.parentNode.removeChild(d);delete b[c]}});b.length=0;return b},show:function(a){if(a===
t)a=this._originDisplay||"";if(this.css("display")!="none")return this;return this.css("display",a)},hide:function(){if(this.length<1)return this;this._originDisplay=this[0].style.display;return this.css("display","none")},outer:function(){if(this.length<1)return"";var a=this.doc.createElement("div");a.appendChild(this[0].cloneNode(true));return ga(a.innerHTML)},isSingle:function(){return!!yb[this.name]},isInline:function(){return!!zb[this.name]},isBlock:function(){return!!Ab[this.name]},isStyle:function(){return!!cc[this.name]},
isControl:function(){return!!Nc[this.name]},contains:function(a){if(this.length<1)return false;return La(this[0],Z(a))},parent:function(){if(this.length<1)return null;var a=this[0].parentNode;return a?new S(a):null},children:function(){if(this.length<1)return new S([]);for(var a=[],b=this[0].firstChild;b;){if(b.nodeType!=3||P(b.nodeValue)!=="")a.push(b);b=b.nextSibling}return new S(a)},first:function(){var a=this.children();return a.length>0?a.eq(0):null},last:function(){var a=this.children();return a.length>
0?a.eq(a.length-1):null},index:function(){if(this.length<1)return-1;for(var a=-1,b=this[0];b;){a++;b=b.previousSibling}return a},prev:function(){if(this.length<1)return null;var a=this[0].previousSibling;return a?new S(a):null},next:function(){if(this.length<1)return null;var a=this[0].nextSibling;return a?new S(a):null},scan:function(a,b){function c(d){for(d=b?d.firstChild:d.lastChild;d;){var e=b?d.nextSibling:d.previousSibling;if(a(d)===false)return false;if(c(d)===false)return false;d=e}}if(!(this.length<
1)){b=b===t?true:b;c(this[0]);return this}}});n("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),function(a,b){S.prototype[b]=function(c){return c?this.bind(b,c):this.fire(b)}});J=g;g=function(a,b){function c(j){j[0]||(j=[]);return new S(j)}if(!(a===t||a===null)){if(typeof a==="string"){if(b)b=Z(b);var d=a.length;if(a.charAt(0)==="@")a=
a.substr(1);if(a.length!==d||/<.+>/.test(a)){d=(b?b.ownerDocument||b:document).createElement("div");var e=[];d.innerHTML='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+a;for(var f=0,h=d.childNodes.length;f<h;f++){var i=d.childNodes[f];i.id!="__kindeditor_temp_tag__"&&e.push(i)}return c(e)}return c(Na(a,b))}if(a&&a.constructor===S)return a;if(a.toArray)a=a.toArray();if(la(a))return c(a);return c(Ta(arguments))}};n(J,function(a,b){g[a]=b});g.NodeClass=S;O.KindEditor=
g;var xa=0,wa=1,oa=2,ya=3,ec=0;T($,{init:function(a){this.startContainer=a;this.startOffset=0;this.endContainer=a;this.endOffset=0;this.collapsed=true;this.doc=a},commonAncestor:function(){function a(j){for(var k=[];j;){k.push(j);j=j.parentNode}return k}for(var b=a(this.startContainer),c=a(this.endContainer),d=0,e=b.length,f=c.length,h,i;++d;){h=b[e-d];i=c[f-d];if(!h||!i||h!==i)break}return b[e-d+1]},setStart:function(a,b){var c=this.doc;this.startContainer=a;this.startOffset=b;if(this.endContainer===
c){this.endContainer=a;this.endOffset=b}return Hb(this)},setEnd:function(a,b){var c=this.doc;this.endContainer=a;this.endOffset=b;if(this.startContainer===c){this.startContainer=a;this.startOffset=b}return Hb(this)},setStartBefore:function(a){return this.setStart(a.parentNode||this.doc,g(a).index())},setStartAfter:function(a){return this.setStart(a.parentNode||this.doc,g(a).index()+1)},setEndBefore:function(a){return this.setEnd(a.parentNode||this.doc,g(a).index())},setEndAfter:function(a){return this.setEnd(a.parentNode||
this.doc,g(a).index()+1)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){var b=g(a);if(b.type==3||b.isSingle())return this.selectNode(a);b=b.children();if(b.length>0)return this.setStartBefore(b[0]).setEndAfter(b[b.length-1]);return this.setStart(a,0).setEnd(a,0)},collapse:function(a){if(a)return this.setEnd(this.startContainer,this.startOffset);return this.setStart(this.endContainer,this.endOffset)},compareBoundaryPoints:function(a,b){var c=this.get(),
d=b.get();if(B){var e={};e[xa]="StartToStart";e[wa]="EndToStart";e[oa]="EndToEnd";e[ya]="StartToEnd";c=c.compareEndPoints(e[a],d);if(c!==0)return c;var f,h,i,j;if(a===xa||a===ya){f=this.startContainer;i=this.startOffset}if(a===wa||a===oa){f=this.endContainer;i=this.endOffset}if(a===xa||a===wa){h=b.startContainer;j=b.startOffset}if(a===oa||a===ya){h=b.endContainer;j=b.endOffset}if(f===h){f=i-j;return f>0?1:f<0?-1:0}for(a=h;a&&a.parentNode!==f;)a=a.parentNode;if(a)return g(a).index()>=i?-1:1;for(a=
f;a&&a.parentNode!==h;)a=a.parentNode;if(a)return g(a).index()>=j?1:-1;if((a=g(h).next())&&a.contains(f))return 1;if((a=g(f).next())&&a.contains(h))return-1}else return c.compareBoundaryPoints(a,d)},cloneRange:function(){return(new $(this.doc)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},toString:function(){var a=this.get();return(B?a.text:a.toString()).replace(/\r\n|\n|\r/g,"")},cloneContents:function(){return ab(this,true,false)},deleteContents:function(){return ab(this,
false,true)},extractContents:function(){return ab(this,true,true)},insertNode:function(a){var b=this.startContainer,c=this.startOffset,d=this.endContainer,e=this.endOffset,f,h,i,j=1;if(a.nodeName.toLowerCase()==="#document-fragment"){f=a.firstChild;h=a.lastChild;j=a.childNodes.length}if(b.nodeType==1)if(i=b.childNodes[c]){b.insertBefore(a,i);if(b===d)e+=j}else b.appendChild(a);else if(b.nodeType==3)if(c===0){b.parentNode.insertBefore(a,b);if(b.parentNode===d)e+=j}else if(c>=b.nodeValue.length)b.nextSibling?
b.parentNode.insertBefore(a,b.nextSibling):b.parentNode.appendChild(a);else{i=c>0?b.splitText(c):b;b.parentNode.insertBefore(a,i);if(b===d){d=i;e-=c}}f?this.setStartBefore(f).setEndAfter(h):this.selectNode(a);if(this.compareBoundaryPoints(oa,this.cloneRange().setEnd(d,e))>=1)return this;return this.setEnd(d,e)},surroundContents:function(a){a.appendChild(this.extractContents());return this.insertNode(a).selectNode(a)},isControl:function(){var a=this.startContainer,b=this.startOffset,c=this.endContainer,
d=this.endOffset;return a.nodeType==1&&a===c&&b+1===d&&g(a.childNodes[b]).isControl()},get:function(a){var b=this.doc;if(!B){b=b.createRange();try{b.setStart(this.startContainer,this.startOffset);b.setEnd(this.endContainer,this.endOffset)}catch(c){}return b}if(a&&this.isControl()){b=b.body.createControlRange();b.addElement(this.startContainer.childNodes[this.startOffset]);return b}a=this.cloneRange().down();b=b.body.createTextRange();b.setEndPoint("StartToStart",Jb(a.startContainer,a.startOffset));
b.setEndPoint("EndToStart",Jb(a.endContainer,a.endOffset));return b},html:function(){return g(this.cloneContents()).outer()},down:function(){function a(c,d,e){if(c.nodeType==1){c=g(c).children();if(c.length!==0){var f,h,i,j;if(d>0)f=c.eq(d-1);if(d<c.length)h=c.eq(d);if(f&&f.type==3){i=f[0];j=i.nodeValue.length}if(h&&h.type==3){i=h[0];j=0}if(i)e?b.setStart(i,j):b.setEnd(i,j)}}}var b=this;a(b.startContainer,b.startOffset,true);a(b.endContainer,b.endOffset,false);return b},up:function(){function a(c,
d,e){if(c.nodeType==3)if(d===0)e?b.setStartBefore(c):b.setEndBefore(c);else if(d==c.nodeValue.length)e?b.setStartAfter(c):b.setEndAfter(c)}var b=this;a(b.startContainer,b.startOffset,true);a(b.endContainer,b.endOffset,false);return b},enlarge:function(a){function b(d,e,f){d=g(d);if(!(d.type==3||Sa[d.name]||!a&&d.isBlock()))if(e===0){for(;!d.prev();){e=d.parent();if(!e||Sa[e.name]||!a&&e.isBlock())break;d=e}f?c.setStartBefore(d[0]):c.setEndBefore(d[0])}else if(e==d.children().length){for(;!d.next();){e=
d.parent();if(!e||Sa[e.name]||!a&&e.isBlock())break;d=e}f?c.setStartAfter(d[0]):c.setEndAfter(d[0])}}var c=this;c.up();b(c.startContainer,c.startOffset,true);b(c.endContainer,c.endOffset,false);return c},shrink:function(){for(var a,b=this.collapsed;this.startContainer.nodeType==1&&(a=this.startContainer.childNodes[this.startOffset])&&a.nodeType==1&&!g(a).isSingle();)this.setStart(a,0);if(b)return this.collapse(b);for(;this.endContainer.nodeType==1&&this.endOffset>0&&(a=this.endContainer.childNodes[this.endOffset-
1])&&a.nodeType==1&&!g(a).isSingle();)this.setEnd(a,a.childNodes.length);return this},createBookmark:function(a){var b,c=g('<span style="display:none;"></span>',this.doc)[0];c.id="__kindeditor_bookmark_start_"+ec++ +"__";if(!this.collapsed){b=c.cloneNode(true);b.id="__kindeditor_bookmark_end_"+ec++ +"__"}b&&this.cloneRange().collapse(false).insertNode(b).setEndBefore(b);this.insertNode(c).setStartAfter(c);return{start:a?"#"+c.id:c,end:b?a?"#"+b.id:b:null}},moveToBookmark:function(a){var b=this.doc,
c=g(a.start,b);a=a.end?g(a.end,b):null;if(!c||c.length<1)return this;this.setStartBefore(c[0]);c.remove();if(a&&a.length>0){this.setEndBefore(a[0]);a.remove()}else this.collapse(true);return this},dump:function(){console.log("--------------------");console.log(this.startContainer.nodeType==3?this.startContainer.nodeValue:this.startContainer,this.startOffset);console.log(this.endContainer.nodeType==3?this.endContainer.nodeValue:this.endContainer,this.endOffset)}});g.RangeClass=$;g.range=bb;g.START_TO_START=
xa;g.START_TO_END=wa;g.END_TO_END=oa;g.END_TO_START=ya;T(Aa,{init:function(a){var b=a.doc;this.doc=b;this.win=ia(b);this.sel=cb(b);this.range=a},selection:function(a){var b=this.doc,c=wc(b);this.sel=cb(b);if(c){this.range=bb(c);g(this.range.startContainer).name=="html"&&this.range.selectNodeContents(b.body).collapse(false);return this}a&&this.range.selectNodeContents(b.body).collapse(false);return this},select:function(a){a=u(a,true);var b=this.sel,c=this.range.cloneRange().shrink(),d=c.startContainer,
e=c.startOffset,f=ha(d),h=this.win,i,j=false;if(a&&d.nodeType==1&&c.collapsed){if(B){b=g("<span>&nbsp;</span>",f);c.insertNode(b[0]);i=f.body.createTextRange();try{i.moveToElementText(b[0])}catch(k){}i.collapse(false);i.select();b.remove();h.focus();return this}if(qa){a=d.childNodes;if(g(d).isInline()||e>0&&g(a[e-1]).isInline()||a[e]&&g(a[e]).isInline()){c.insertNode(f.createTextNode("\u200b"));j=true}}}if(B)try{i=c.get(true);i.select()}catch(m){}else{j&&c.collapse(false);i=c.get(true);b.removeAllRanges();
b.addRange(i)}h.focus();return this},wrap:function(a){var b=this.range,c;c=g(a,this.doc);if(b.collapsed){b.shrink();b.insertNode(c[0]).selectNodeContents(c[0]);return this}if(c.isBlock()){for(var d=a=c.clone(true);d.first();)d=d.first();d.append(b.extractContents());b.insertNode(a[0]).selectNode(a[0]);return this}b.enlarge();var e=b.createBookmark();a=b.commonAncestor();var f=false;g(a).scan(function(h){if(!f&&h==e.start)f=true;else if(f){if(h==e.end)return false;var i=g(h);if(!Ac(i))if(i.type==3&&
P(h.nodeValue).length>0){for(var j;(j=i.parent())&&j.isStyle()&&j.children().length==1;)i=j;zc(i,c)}}});b.moveToBookmark(e);return this},split:function(a,b){for(var c=this.range,d=c.doc,e=c.cloneRange().collapse(a),f=e.startContainer,h=e.startOffset,i=f.nodeType==3?f.parentNode:f,j=false,k;i&&i.parentNode;){k=g(i);if(b){if(!k.isStyle())break;if(!db(k,b))break}else if(Sa[k.name])break;j=true;i=i.parentNode}if(j){b=d.createElement("span");c.cloneRange().collapse(!a).insertNode(b);a?e.setStartBefore(i.firstChild).setEnd(f,
h):e.setStart(f,h).setEndAfter(i.lastChild);f=e.extractContents();h=f.firstChild;d=f.lastChild;if(a){e.insertNode(f);c.setStartAfter(d).setEndBefore(b)}else{i.appendChild(f);c.setStartBefore(b).setEndBefore(h)}e=b.parentNode;if(e==c.endContainer){i=g(b).prev();f=g(b).next();if(i&&f&&i.type==3&&f.type==3)c.setEnd(i[0],i[0].nodeValue.length);else a||c.setEnd(c.endContainer,c.endOffset-1)}e.removeChild(b)}return this},remove:function(a){var b=this.doc,c=this.range;c.enlarge();if(c.startOffset===0){for(var d=
g(c.startContainer),e;(e=d.parent())&&e.isStyle()&&e.children().length==1;)d=e;c.setStart(d[0],0);d=g(c.startContainer);d.isBlock()&&eb(d,a);(d=d.parent())&&d.isBlock()&&eb(d,a)}if(c.collapsed){this.split(true,a);b=c.startContainer;d=c.startOffset;if(d>0)if((e=g(b.childNodes[d-1]))&&pa(e)){e.remove();c.setStart(b,d-1)}(d=g(b.childNodes[d]))&&pa(d)&&d.remove();if(pa(b)){c.startBefore(b);b.remove()}c.collapse(true);return this}this.split(true,a);this.split(false,a);var f=b.createElement("span"),h=b.createElement("span");
c.cloneRange().collapse(false).insertNode(h);c.cloneRange().collapse(true).insertNode(f);var i=[],j=false;g(c.commonAncestor()).scan(function(l){if(!j&&l==f)j=true;else{if(l==h)return false;j&&i.push(l)}});g(f).remove();g(h).remove();b=c.startContainer;d=c.startOffset;e=c.endContainer;var k=c.endOffset;if(d>0){var m=g(b.childNodes[d-1]);if(m&&pa(m)){m.remove();c.setStart(b,d-1);b==e&&c.setEnd(e,k-1)}if((d=g(b.childNodes[d]))&&pa(d)){d.remove();b==e&&c.setEnd(e,k-1)}}(b=g(e.childNodes[c.endOffset]))&&
pa(b)&&b.remove();b=c.createBookmark(true);n(i,function(l,r){eb(g(r),a)});c.moveToBookmark(b);return this},commonNode:function(a){function b(h){var i=h;for(h=h;h;){if(db(g(h),a))return g(h);h=h.parentNode}for(;i&&(i=i.lastChild);)if(db(g(i),a))return g(i);return null}var c=this.range,d=c.endContainer;c=c.endOffset;var e=d.nodeType==3||c===0?d:d.childNodes[c-1],f=b(e);if(f)return f;if(e.nodeType==1||d.nodeType==3&&c===0)if(d=g(e).prev())return b(d);return null},commonAncestor:function(a){function b(h){for(;h;){if(h.nodeType==
1)if(h.tagName.toLowerCase()===a)return h;h=h.parentNode}return null}var c=this.range,d=c.startContainer,e=c.startOffset,f=c.endContainer;c=c.endOffset;f=f.nodeType==3||c===0?f:f.childNodes[c-1];d=b(d.nodeType==3||e===0?d:d.childNodes[e-1]);e=b(f);if(d&&e&&d===e)return g(d);return null},state:function(a){var b=this.doc,c=false;try{c=b.queryCommandState(a)}catch(d){}return c},val:function(a){function b(e){return e.toLowerCase()}var c=this.doc;a=b(a);var d="";if(a==="fontfamily"||a==="fontname"){d=
Lb(c,"fontname");d=d.replace(/['"]/g,"");return b(d)}if(a==="formatblock"){d=Lb(c,a);if(d==="")if(a=this.commonNode({"h1,h2,h3,h4,h5,h6,p,div,pre,address":"*"}))d=a.name;if(d==="Normal")d="p";return b(d)}if(a==="fontsize"){if(a=this.commonNode({"*":".font-size"}))d=a.css("font-size");return b(d)}if(a==="forecolor"){if(a=this.commonNode({"*":".color"}))d=a.css("color");d=Ia(d);if(d==="")d="default";return b(d)}if(a==="hilitecolor"){if(a=this.commonNode({"*":".background-color"}))d=a.css("background-color");
d=Ia(d);if(d==="")d="default";return b(d)}return d},toggle:function(a,b){this.commonNode(b)?this.remove(b):this.wrap(a);return this.select()},bold:function(){return this.toggle("<strong></strong>",{span:".font-weight=bold",strong:"*",b:"*"})},italic:function(){return this.toggle("<em></em>",{span:".font-style=italic",em:"*",i:"*"})},underline:function(){return this.toggle("<u></u>",{span:".text-decoration=underline",u:"*"})},strikethrough:function(){return this.toggle("<s></s>",{span:".text-decoration=line-through",
s:"*"})},forecolor:function(a){return this.toggle('<span style="color:'+a+';"></span>',{span:".color="+a,font:"color"})},hilitecolor:function(a){return this.toggle('<span style="background-color:'+a+';"></span>',{span:".background-color="+a})},fontsize:function(a){return this.toggle('<span style="font-size:'+a+';"></span>',{span:".font-size="+a,font:"size"})},fontname:function(a){return this.fontfamily(a)},fontfamily:function(a){return this.toggle('<span style="font-family:'+a+';"></span>',{span:".font-family="+
a,font:"face"})},removeformat:function(){var a={"*":".font-weight,.font-style,.text-decoration,.color,.background-color,.font-size,.font-family,.text-indent"};n(cc,function(b){a[b]="*"});this.remove(a);return this.select()},inserthtml:function(a,b){function c(i,j){j='<img id="__kindeditor_temp_tag__" width="0" height="0" style="display:none;" />'+j;var k=i.get();if(k.item)k.item(0).outerHTML=j;else k.pasteHTML(j);j=i.doc.getElementById("__kindeditor_temp_tag__");j.parentNode.removeChild(j);k=Kb(k);
i.setEnd(k.endContainer,k.endOffset);i.collapse(false);e.select(false)}function d(i,j){var k=i.doc,m=k.createDocumentFragment();g("@"+j,k).each(function(){m.appendChild(this)});i.deleteContents();i.insertNode(m);i.collapse(false);e.select(false)}var e=this,f=e.range;if(a==="")return e;if(B&&b){try{c(f,a)}catch(h){d(f,a)}return e}d(f,a);return e},hr:function(){return this.inserthtml("<hr />")},print:function(){this.win.print();return this},insertimage:function(a,b,c,d,e,f){b=u(b,"");u(e,0);a='<img src="'+
Q(a)+'" data-ke-src="'+Q(a)+'" ';if(c)a+='width="'+Q(c)+'" ';if(d)a+='height="'+Q(d)+'" ';if(b)a+='title="'+Q(b)+'" ';if(f)a+='align="'+Q(f)+'" ';a+='alt="'+Q(b)+'" ';a+="/>";return this.inserthtml(a)},createlink:function(a,b){var c=this.doc,d=this.range;this.select();var e=this.commonNode({a:"*"});if(e&&!d.isControl()){d.selectNode(e.get());this.select()}e='<a href="'+Q(a)+'" data-ke-src="'+Q(a)+'" ';if(b)e+=' target="'+Q(b)+'"';if(d.collapsed){e+=">"+Q(a)+"</a>";return this.inserthtml(e)}if(d.isControl()){var f=
g(d.startContainer.childNodes[d.startOffset]);e+="></a>";f.after(g(e,c));f.next().append(f);d.selectNode(f[0]);return this.select()}da(c,"createlink","__kindeditor_temp_url__");g('a[href="__kindeditor_temp_url__"]',c).each(function(){g(this).attr("href",a).attr("data-ke-src",a);b?g(this).attr("target",b):g(this).removeAttr("target")});return this},unlink:function(){var a=this.doc,b=this.range;this.select();if(b.collapsed){var c=this.commonNode({a:"*"});if(c){b.selectNode(c.get());this.select()}da(a,
"unlink",null);if(qa&&g(b.startContainer).name==="img"){a=g(b.startContainer).parent();a.name==="a"&&a.remove(true)}}else da(a,"unlink",null);return this}});n("formatblock,selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript".split(","),function(a,b){Aa.prototype[b]=function(c){this.select();da(this.doc,b,c);if(!B||ba(b,"formatblock,selectall,insertorderedlist,insertunorderedlist".split(","))>=0)this.selection();return this}});
n("cut,copy,paste".split(","),function(a,b){Aa.prototype[b]=function(){if(!this.doc.queryCommandSupported(b))throw"not supported";this.select();da(this.doc,b,null);return this}});g.CmdClass=Aa;g.cmd=Pb;T(fa,{init:function(a){var b=this;b.name=a.name||"";b.doc=a.doc||document;b.win=ia(b.doc);b.x=K(a.x);b.y=K(a.y);b.z=a.z;b.width=K(a.width);b.height=K(a.height);b.div=g('<div style="display:block;"></div>');b.options=a;b._alignEl=a.alignEl;b.width&&b.div.css("width",b.width);b.height&&b.div.css("height",
b.height);b.z&&b.div.css({position:"absolute",left:b.x,top:b.y,"z-index":b.z});if(b.z&&(b.x===t||b.y===t))b.autoPos(b.width,b.height);a.cls&&b.div.addClass(a.cls);a.shadowMode&&b.div.addClass("ke-shadow");a.css&&b.div.css(a.css);a.src?g(a.src).replaceWith(b.div):g(b.doc.body).append(b.div);a.html&&b.div.html(a.html);if(a.autoScroll)if(B&&R<7||ca){var c=na();g(b.win).bind("scroll",function(){var d=na(),e=d.x-c.x;d=d.y-c.y;b.pos(L(b.x)+e,L(b.y)+d,false)})}else b.div.css("position","fixed")},pos:function(a,
b,c){c=u(c,true);if(a!==null){a=a<0?0:K(a);this.div.css("left",a);if(c)this.x=a}if(b!==null){b=b<0?0:K(b);this.div.css("top",b);if(c)this.y=b}return this},autoPos:function(a,b){a=L(a)||0;var c=L(b)||0;b=na();if(this._alignEl){var d=g(this._alignEl),e=d.pos();a=ea(d[0].clientWidth/2-a/2);c=ea(d[0].clientHeight/2-c/2);x=a<0?e.x:e.x+a;y=c<0?e.y:e.y+c}else{e=U(this.doc);x=ea(b.x+(e.clientWidth-a)/2);y=ea(b.y+(e.clientHeight-c)/2)}if(!(B&&R<7||ca)){x-=b.x;y-=b.y}return this.pos(x,y)},remove:function(){var a=
this;if(B&&R<7||ca)g(a.win).unbind("scroll");a.div.remove();n(a,function(b){a[b]=null});return this},show:function(){this.div.show();return this},hide:function(){this.div.hide();return this},draggable:function(a){var b=this;a=a||{};a.moveEl=b.div;a.moveFn=function(c,d,e,f,h,i){if((c+=h)<0)c=0;if((d+=i)<0)d=0;b.pos(c,d)};gb(a);return b}});g.WidgetClass=fa;g.widget=ib;var jb="";if(J=document.getElementsByTagName("html"))jb=J[0].dir;T(Ca,fa,{init:function(a){function b(){var k=hb(c.iframe);k.open();
if(i)k.domain=document.domain;k.write(Bc(d,e,f,h));k.close();c.win=c.iframe[0].contentWindow;c.doc=k;var m=Pb(k);c.afterChange(function(){m.selection()});qa&&g(k).click(function(l){if(g(l.target).name==="img"){m.selection(true);m.range.selectNode(l.target);m.select()}});B&&g(k).keydown(function(l){if(l.which==8){m.selection();var r=m.range;if(r.isControl()){r.collapse(true);g(r.startContainer.childNodes[r.startOffset]).remove();l.preventDefault()}}});c.cmd=m;c.html(Ba(c.srcElement));if(B){k.body.disabled=
true;k.body.contentEditable=true;k.body.removeAttribute("disabled")}else k.designMode="on";a.afterCreate&&a.afterCreate.call(c)}var c=this;Ca.parent.init.call(c,a);c.srcElement=g(a.srcElement);c.div.addClass("ke-edit");c.designMode=u(a.designMode,true);c.beforeGetHtml=a.beforeGetHtml;c.beforeSetHtml=a.beforeSetHtml;c.afterSetHtml=a.afterSetHtml;var d=u(a.themesPath,""),e=a.bodyClass,f=a.cssPath,h=a.cssData,i=location.host.replace(/:\d+/,"")!==document.domain,j="document.open();"+(i?'document.domain="'+
document.domain+'";':"")+"document.close();";j=B?' src="javascript:void(function(){'+encodeURIComponent(j)+'}())"':"";c.iframe=g('<iframe class="ke-edit-iframe" hidefocus="true" frameborder="0"'+j+"></iframe>").css("width","100%");c.textarea=g('<textarea class="ke-edit-textarea" hidefocus="true"></textarea>').css("width","100%");c.width&&c.setWidth(c.width);c.height&&c.setHeight(c.height);c.designMode?c.textarea.hide():c.iframe.hide();i&&c.iframe.bind("load",function(){c.iframe.unbind("load");B?b():
setTimeout(b,0)});c.div.append(c.iframe);c.div.append(c.textarea);c.srcElement.hide();!i&&b()},setWidth:function(a){this.div.css("width",K(a));return this},setHeight:function(a){a=K(a);this.div.css("height",a);this.iframe.css("height",a);if(B&&R<8||ca)a=K(L(a)-2);this.textarea.css("height",a);return this},remove:function(){var a=this.doc;g(a.body).unbind();g(a).unbind();g(this.win).unbind();Ba(this.srcElement,this.html());this.srcElement.show();a.write("");this.iframe.unbind();this.textarea.unbind();
Ca.parent.remove.call(this)},html:function(a,b){var c=this.doc;if(this.designMode){c=c.body;if(a===t){a=b?"<!doctype html><html>"+c.parentNode.innerHTML+"</html>":c.innerHTML;if(this.beforeGetHtml)a=this.beforeGetHtml(a);if(ra&&a=="<br />")a="";return a}if(this.beforeSetHtml)a=this.beforeSetHtml(a);g(c).html(a);this.afterSetHtml&&this.afterSetHtml();return this}if(a===t)return this.textarea.val();this.textarea.val(a);return this},design:function(a){if(a===t?!this.designMode:a){if(!this.designMode){a=
this.html();this.designMode=true;this.html(a);this.textarea.hide();this.iframe.show()}}else if(this.designMode){a=this.html();this.designMode=false;this.html(a);this.iframe.hide();this.textarea.show()}return this.focus()},focus:function(){this.designMode?this.win.focus():this.textarea[0].focus();return this},blur:function(){if(B){var a=g('<input type="text" style="float:left;width:0;height:0;padding:0;margin:0;border:0;" value="" />',this.div);this.div.append(a);a[0].focus();a.remove()}else this.designMode?
this.win.blur():this.textarea[0].blur();return this},afterChange:function(a){function b(e){setTimeout(function(){a(e)},1)}var c=this.doc,d=c.body;g(c).keyup(function(e){!e.ctrlKey&&!e.altKey&&pb[e.which]&&a(e)});g(c).mouseup(a).contextmenu(a);g(this.win).blur(a);g(d).bind("paste",b);g(d).bind("cut",b);return this}});g.EditClass=Ca;g.edit=Qb;g.iframeDoc=hb;T(Oa,fa,{init:function(a){function b(e){e=g(e);if(e.hasClass("ke-outline"))return e;if(e.hasClass("ke-toolbar-icon"))return e.parent()}function c(e,
f){if(e=b(e.target))e.hasClass("ke-disabled")||e.hasClass("ke-selected")||e[f]("ke-on")}var d=this;Oa.parent.init.call(d,a);d.disableMode=u(a.disableMode,false);d.noDisableItemMap=M(u(a.noDisableItems,[]));d._itemMap={};d.div.addClass("ke-toolbar").bind("contextmenu,mousedown,mousemove",function(e){e.preventDefault()}).attr("unselectable","on");d.div.mouseover(function(e){c(e,"addClass")}).mouseout(function(e){c(e,"removeClass")}).click(function(e){var f=b(e.target);if(f)f.hasClass("ke-disabled")||
d.options.click.call(this,e,f.attr("data-name"))})},get:function(a){if(this._itemMap[a])return this._itemMap[a];return this._itemMap[a]=g("span.ke-icon-"+a,this.div).parent()},select:function(a){Rb.call(this,a,function(b){b.addClass("ke-selected")});return self},unselect:function(a){Rb.call(this,a,function(b){b.removeClass("ke-selected").removeClass("ke-on")});return self},enable:function(a){if(a=a.get?a:this.get(a)){a.removeClass("ke-disabled");a.opacity(1)}return this},disable:function(a){if(a=
a.get?a:this.get(a)){a.removeClass("ke-selected").addClass("ke-disabled");a.opacity(0.5)}return this},disableAll:function(a,b){var c=this,d=c.noDisableItemMap;if(b)d=M(b);if(a===t?!c.disableMode:a){g("span.ke-outline",c.div).each(function(){var e=g(this),f=e[0].getAttribute("data-name",2);d[f]||c.disable(e)});c.disableMode=true}else{g("span.ke-outline",c.div).each(function(){var e=g(this),f=e[0].getAttribute("data-name",2);d[f]||c.enable(e)});c.disableMode=false}return c}});g.ToolbarClass=Oa;g.toolbar=
Sb;T(Da,fa,{init:function(a){a.z=a.z||811213;Da.parent.init.call(this,a);this.centerLineMode=u(a.centerLineMode,true);this.div.addClass("ke-menu").bind("click,mousedown",function(b){b.stopPropagation()}).attr("unselectable","on")},addItem:function(a){if(a.title==="-")this.div.append(g('<div class="ke-menu-separator"></div>'));else{var b=g('<div class="ke-menu-item" unselectable="on"></div>'),c=g('<div class="ke-inline-block ke-menu-item-left"></div>'),d=g('<div class="ke-inline-block ke-menu-item-right"></div>'),
e=K(a.height),f=u(a.iconClass,"");this.div.append(b);if(e){b.css("height",e);d.css("line-height",e)}var h;if(this.centerLineMode){h=g('<div class="ke-inline-block ke-menu-item-center"></div>');e&&h.css("height",e)}b.mouseover(function(){g(this).addClass("ke-menu-item-on");h&&h.addClass("ke-menu-item-center-on")}).mouseout(function(){g(this).removeClass("ke-menu-item-on");h&&h.removeClass("ke-menu-item-center-on")}).click(function(i){a.click.call(g(this));i.stopPropagation()}).append(c);h&&b.append(h);
b.append(d);if(a.checked)f="ke-icon-checked";f!==""&&c.html('<span class="ke-inline-block ke-toolbar-icon ke-toolbar-icon-url '+f+'"></span>');d.html(a.title);return this}},remove:function(){this.options.beforeRemove&&this.options.beforeRemove.call(this);g(".ke-menu-item",this.div[0]).unbind();Da.parent.remove.call(this);return this}});g.MenuClass=Da;g.menu=kb;T(Ea,fa,{init:function(a){a.z=a.z||811213;Ea.parent.init.call(this,a);var b=a.colors||[["#E53333","#E56600","#FF9900","#64451D","#DFC5A4",
"#FFE500"],["#009900","#006600","#99BB00","#B8D100","#60D978","#00D5FF"],["#337FE5","#003399","#4C33E5","#9933E5","#CC33E5","#EE33EE"],["#FFFFFF","#CCCCCC","#999999","#666666","#333333","#000000"]];this.selectedColor=(a.selectedColor||"").toLowerCase();this._cells=[];this.div.addClass("ke-colorpicker").bind("click,mousedown",function(h){h.stopPropagation()}).attr("unselectable","on");a=this.doc.createElement("table");this.div.append(a);a.className="ke-colorpicker-table";a.cellPadding=0;a.cellSpacing=
0;a.border=0;var c=a.insertRow(0),d=c.insertCell(0);d.colSpan=b[0].length;this._addAttr(d,"","ke-colorpicker-cell-top");for(var e=0;e<b.length;e++){c=a.insertRow(e+1);for(var f=0;f<b[e].length;f++){d=c.insertCell(f);this._addAttr(d,b[e][f],"ke-colorpicker-cell")}}},_addAttr:function(a,b,c){var d=this;a=g(a).addClass(c);d.selectedColor===b.toLowerCase()&&a.addClass("ke-colorpicker-cell-selected");a.attr("title",b||d.options.noColor);a.mouseover(function(){g(this).addClass("ke-colorpicker-cell-on")});
a.mouseout(function(){g(this).removeClass("ke-colorpicker-cell-on")});a.click(function(e){e.stop();d.options.click.call(g(this),b)});b?a.append(g('<div class="ke-colorpicker-cell-color" unselectable="on"></div>').css("background-color",b)):a.html(d.options.noColor);g(a).attr("unselectable","on");d._cells.push(a)},remove:function(){n(this._cells,function(){this.unbind()});Ea.parent.remove.call(this);return this}});g.ColorPickerClass=Ea;g.colorpicker=Tb;T(lb,{init:function(a){var b=g(a.button),c=a.fieldName||
"file",d=a.url||"",e=b.val(),f=a.extraParams||{},h=b[0].className||"",i=a.target||"kindeditor_upload_iframe_"+(new Date).getTime();a.afterError=a.afterError||function(m){alert(m)};var j=[];for(var k in f)j.push('<input type="hidden" name="'+k+'" value="'+f[k]+'" />');c=['<div class="ke-inline-block '+h+'">',a.target?"":'<iframe name="'+i+'" style="display:none;"></iframe>',a.form?'<div class="ke-upload-area">':'<form class="ke-upload-area ke-form" method="post" enctype="multipart/form-data" target="'+
i+'" action="'+d+'">','<span class="ke-button-common">',j.join(""),'<input type="button" class="ke-button-common ke-button" value="'+e+'" />',"</span>",'<input type="file" class="ke-upload-file" name="'+c+'" tabindex="-1" />',a.form?"</div>":"</form>","</div>"].join("");c=g(c,b.doc);b.hide();b.before(c);this.div=c;this.button=b;this.iframe=a.target?g('iframe[name="'+i+'"]'):g("iframe",c);this.form=a.form?g(a.form):g("form",c);b=a.width||g(".ke-button-common",c).width();this.fileBox=g(".ke-upload-file",
c).width(b);this.options=a},submit:function(){var a=this,b=a.iframe;b.bind("load",function(){b.unbind();var c=document.createElement("form");a.fileBox.before(c);g(c).append(a.fileBox);c.reset();g(c).remove(true);c=g.iframeDoc(b);var d=c.getElementsByTagName("pre")[0],e="",f;e=d?d.innerHTML:c.body.innerHTML;b[0].src="javascript:false";try{f=g.json(e)}catch(h){a.options.afterError.call(a,"<!doctype html><html>"+c.body.parentNode.innerHTML+"</html>")}f&&a.options.afterUpload.call(a,f)});a.form[0].submit();
return a},remove:function(){this.fileBox&&this.fileBox.unbind();this.iframe.remove();this.div.remove();this.button.show();return this}});g.UploadButtonClass=lb;g.uploadbutton=Cc;T(Fa,fa,{init:function(a){var b=u(a.shadowMode,true);a.z=a.z||811213;a.shadowMode=false;a.autoScroll=u(a.autoScroll,true);Fa.parent.init.call(this,a);var c=a.title,d=g(a.body,this.doc),e=a.previewBtn,f=a.yesBtn,h=a.noBtn,i=a.closeBtn,j=u(a.showMask,true);this.div.addClass("ke-dialog").bind("click,mousedown",function(l){l.stopPropagation()});
var k=g('<div class="ke-dialog-content"></div>').appendTo(this.div);if(B&&R<7)this.iframeMask=g('<iframe src="about:blank" class="ke-dialog-shadow"></iframe>').appendTo(this.div);else b&&g('<div class="ke-dialog-shadow"></div>').appendTo(this.div);b=g('<div class="ke-dialog-header"></div>');k.append(b);b.html(c);this.closeIcon=g('<span class="ke-dialog-icon-close" title="'+i.name+'"></span>').click(i.click);b.append(this.closeIcon);this.draggable({clickEl:b,beforeDrag:a.beforeDrag});a=g('<div class="ke-dialog-body"></div>');
k.append(a);a.append(d);var m=g('<div class="ke-dialog-footer"></div>');if(e||f||h)k.append(m);n([{btn:e,name:"preview"},{btn:f,name:"yes"},{btn:h,name:"no"}],function(){if(this.btn){var l=Dc(this.btn);l.addClass("ke-dialog-"+this.name);m.append(l)}});this.height&&a.height(L(this.height)-b.height()-m.height());this.div.width(this.div.width());this.div.height(this.div.height());this.mask=null;if(j){e=U(this.doc);d=Math.max(e.scrollWidth,e.clientWidth);e=Math.max(e.scrollHeight,e.clientHeight);this.mask=
ib({x:0,y:0,z:this.z-1,cls:"ke-dialog-mask",width:d,height:e})}this.autoPos(this.div.width(),this.div.height());this.footerDiv=m;this.bodyDiv=a;this.headerDiv=b;this.isLoading=false},setMaskIndex:function(a){this.mask.div.css("z-index",a)},showLoading:function(a){a=u(a,"");var b=this.bodyDiv;this.loading=g('<div class="ke-dialog-loading"><div class="ke-inline-block ke-dialog-loading-content" style="margin-top:'+Math.round(b.height()/3)+'px;">'+a+"</div></div>").width(b.width()).height(b.height()).css("top",
this.headerDiv.height()+"px");b.css("visibility","hidden").after(this.loading);this.isLoading=true;return this},hideLoading:function(){this.loading&&this.loading.remove();this.bodyDiv.css("visibility","visible");this.isLoading=false;return this},remove:function(){this.options.beforeRemove&&this.options.beforeRemove.call(this);this.mask&&this.mask.remove();this.iframeMask&&this.iframeMask.remove();this.closeIcon.unbind();g("input",this.div).unbind();g("button",this.div).unbind();this.footerDiv.unbind();
this.bodyDiv.unbind();this.headerDiv.unbind();g("iframe",this.div).each(function(){g(this).remove()});Fa.parent.remove.call(this);return this}});g.DialogClass=Fa;g.dialog=Ub;g.tabs=Ec;g.loadScript=mb;g.loadStyle=nb;g.ajax=Fc;var ja={},aa={};Ga.prototype={lang:function(a){return Yb(a,this.langType)},loadPlugin:function(a,b){var c=this;if(ja[a]){if(c._calledPlugins[a]){b&&b.call(c);return c}ja[a].call(c,KindEditor);b&&b.call(c);c._calledPlugins[a]=true;return c}if(c.isLoading)return c;c.isLoading=true;
mb(c.pluginsPath+a+"/"+a+".js?ver="+encodeURIComponent(g.DEBUG?Qa:Ra),function(){c.isLoading=false;ja[a]&&c.loadPlugin(a,b)});return c},handler:function(a,b){var c=this;c._handlers[a]||(c._handlers[a]=[]);if(qb(b)){c._handlers[a].push(b);return c}n(c._handlers[a],function(){b=this.call(c,b)});return b},clickToolbar:function(a,b){var c=this,d="clickToolbar"+a;if(b===t){if(c._handlers[d])return c.handler(d);c.loadPlugin(a,function(){c.handler(d)});return c}return c.handler(d,b)},updateState:function(){var a=
this;n("justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,subscript,superscript,bold,italic,underline,strikethrough".split(","),function(b,c){a.cmd.state(c)?a.toolbar.select(c):a.toolbar.unselect(c)});return a},addContextmenu:function(a){this._contextmenus.push(a);return this},afterCreate:function(a){return this.handler("afterCreate",a)},beforeRemove:function(a){return this.handler("beforeRemove",a)},beforeGetHtml:function(a){return this.handler("beforeGetHtml",
a)},beforeSetHtml:function(a){return this.handler("beforeSetHtml",a)},afterSetHtml:function(a){return this.handler("afterSetHtml",a)},create:function(){function a(){k.height()===0?setTimeout(a,100):c.resize(e,f)}function b(p,s,w){w=u(w,true);if(p&&p>=c.minWidth){c.resize(p,null);if(w)c.width=K(p)}if(s&&s>=c.minHeight){c.resize(null,s);if(w)c.height=K(s)}}var c=this,d=c.fullscreenMode;if(c.isCreated)return c;if(c.srcElement.data("kindeditor"))return c;c.srcElement.data("kindeditor","true");if(d)U().style.overflow=
"hidden";else U().style.overflow="";var e=d?U().clientWidth+"px":c.width,f=d?U().clientHeight+"px":c.height;if(B&&R<8||ca)f=K(L(f)+2);var h=c.container=g(c.layout);d?g(document.body).append(h):c.srcElement.before(h);var i=g(".toolbar",h),j=g(".edit",h),k=c.statusbar=g(".statusbar",h);h.removeClass("container").addClass("ke-container ke-container-"+c.themeType).css("width",e);if(d){h.css({position:"absolute",left:0,top:0,"z-index":811211});if(!ra)c._scrollPos=na();O.scrollTo(0,0);g(document.body).css({height:"1px",
overflow:"hidden"});g(document.body.parentNode).css("overflow","hidden");c._fullscreenExecuted=true}else{if(c._fullscreenExecuted){g(document.body).css({height:"",overflow:""});g(document.body.parentNode).css("overflow","")}c._scrollPos&&O.scrollTo(c._scrollPos.x,c._scrollPos.y)}var m=[];g.each(c.items,function(p,s){if(s=="|")m.push('<span class="ke-inline-block ke-separator"></span>');else if(s=="/")m.push('<div class="ke-hr"></div>');else{m.push('<span class="ke-outline" data-name="'+s+'" title="'+
c.lang(s)+'" unselectable="on">');m.push('<span class="ke-toolbar-icon ke-toolbar-icon-url ke-icon-'+s+'" unselectable="on"></span></span>')}});i=c.toolbar=Sb({src:i,html:m.join(""),noDisableItems:c.noDisableItems,click:function(p,s){p.stop();if(c.menu){p=c.menu.name;c.hideMenu();if(p===s)return}c.clickToolbar(s)}});var l=L(f)-i.div.height(),r=c.edit=Qb({height:l>0&&L(f)>c.minHeight?l:c.minHeight,src:j,srcElement:c.srcElement,designMode:c.designMode,themesPath:c.themesPath,bodyClass:c.bodyClass,cssPath:c.cssPath,
cssData:c.cssData,beforeGetHtml:function(p){p=c.beforeGetHtml(p);return ga(p,c.filterMode?c.htmlTags:null,c.urlType,c.wellFormatMode,c.indentChar)},beforeSetHtml:function(p){p=ga(p,c.filterMode?c.htmlTags:null,"",false);return c.beforeSetHtml(p)},afterSetHtml:function(){c.edit=r=this;c.afterSetHtml()},afterCreate:function(){c.edit=r=this;c.cmd=r.cmd;c._docMousedownFn=function(){c.menu&&c.hideMenu()};g(r.doc,document).mousedown(c._docMousedownFn);Gc.call(c);Hc.call(c);Ic.call(c);Jc.call(c);r.afterChange(function(){if(r.designMode){c.updateState();
c.addBookmark();c.options.afterChange&&c.options.afterChange.call(c)}});r.textarea.keyup(function(p){!p.ctrlKey&&!p.altKey&&dc[p.which]&&c.options.afterChange&&c.options.afterChange.call(c)});c.readonlyMode&&c.readonly();c.isCreated=true;if(c.initContent==="")c.initContent=c.html();c.afterCreate();c.options.afterCreate&&c.options.afterCreate.call(c)}});k.removeClass("statusbar").addClass("ke-statusbar").append('<span class="ke-inline-block ke-statusbar-center-icon"></span>').append('<span class="ke-inline-block ke-statusbar-right-icon"></span>');
g(O).unbind("resize");a();if(d){g(O).bind("resize",function(){c.isCreated&&b(U().clientWidth,U().clientHeight,false)});i.select("fullscreen");k.first().css("visibility","hidden");k.last().css("visibility","hidden")}else{ra&&g(O).bind("scroll",function(){c._scrollPos=na()});c.resizeType>0?gb({moveEl:h,clickEl:k,moveFn:function(p,s,w,H,o,C){H+=C;b(null,H)}}):k.first().css("visibility","hidden");c.resizeType===2?gb({moveEl:h,clickEl:k.last(),moveFn:function(p,s,w,H,o,C){w+=o;H+=C;b(w,H)}}):k.last().css("visibility",
"hidden")}return c},remove:function(){var a=this;if(!a.isCreated)return a;a.beforeRemove();a.srcElement.data("kindeditor","");a.menu&&a.hideMenu();n(a.dialogs,function(){a.hideDialog()});g(document).unbind("mousedown",a._docMousedownFn);a.toolbar.remove();a.edit.remove();a.statusbar.last().unbind();a.statusbar.unbind();a.container.remove();a.container=a.toolbar=a.edit=a.menu=null;a.dialogs=[];a.isCreated=false;return a},resize:function(a,b){a!==null&&L(a)>this.minWidth&&this.container.css("width",
K(a));if(b!==null&&this.toolbar.div&&this.statusbar){b=L(b)-this.toolbar.div.height()-this.statusbar.height();b>0&&L(b)>this.minHeight&&this.edit.setHeight(b)}return this},select:function(){this.isCreated&&this.cmd.select();return this},html:function(a){if(a===t)return this.isCreated?this.edit.html():Ba(this.srcElement);this.isCreated?this.edit.html(a):Ba(this.srcElement,a);return this},fullHtml:function(){return this.isCreated?this.edit.html(t,true):""},text:function(a){return a===t?P(this.html().replace(/<(?!img|embed).*?>/ig,
"").replace(/&nbsp;/ig," ")):this.html(Q(a))},isEmpty:function(){return P(this.text().replace(/\r\n|\n|\r/,""))===""},isDirty:function(){return P(this.initContent.replace(/\r\n|\n|\r|t/g,""))!==P(this.html().replace(/\r\n|\n|\r|t/g,""))},selectedHtml:function(){return this.isCreated?this.cmd.range.html():""},count:function(a){a=(a||"html").toLowerCase();if(a==="html")return ka(ob(this.html())).length;if(a==="text")return this.text().replace(/<(?:img|embed).*?>/ig,"K").replace(/\r\n|\n|\r/g,"").length;
return 0},exec:function(a){a=a.toLowerCase();var b=this.cmd,c=ba(a,"selectall,copy,paste,print".split(","))<0;c&&this.addBookmark(false);b[a].apply(b,Ta(arguments,1));if(c){this.updateState();this.addBookmark(false);this.options.afterChange&&this.options.afterChange.call(this)}return this},insertHtml:function(a,b){if(!this.isCreated)return this;a=this.beforeSetHtml(a);this.exec("inserthtml",a,b);return this},appendHtml:function(a){this.html(this.html()+a);if(this.isCreated){a=this.cmd;a.range.selectNodeContents(a.doc.body).collapse(false);
a.select()}return this},sync:function(){Ba(this.srcElement,this.html());return this},focus:function(){this.isCreated?this.edit.focus():this.srcElement[0].focus();return this},blur:function(){this.isCreated?this.edit.blur():this.srcElement[0].blur();return this},addBookmark:function(a){a=u(a,true);var b=this.edit,c=b.doc.body,d=ob(c.innerHTML);if(a&&this._undoStack.length>0)if(Math.abs(d.length-ka(this._undoStack[this._undoStack.length-1].html).length)<this.minChangeSize)return this;if(b.designMode&&
!this._firstAddBookmark){b=this.cmd.range;a=b.createBookmark(true);a.html=ob(c.innerHTML);b.moveToBookmark(a)}else a={html:d};this._firstAddBookmark=false;Zb(this._undoStack,a);return this},undo:function(){return $b.call(this,this._undoStack,this._redoStack)},redo:function(){return $b.call(this,this._redoStack,this._undoStack)},fullscreen:function(a){this.fullscreenMode=a===t?!this.fullscreenMode:a;return this.remove().create()},readonly:function(a){a=u(a,true);var b=this,c=b.edit,d=c.doc;b.designMode?
b.toolbar.disableAll(a,[]):n(b.noDisableItems,function(){b.toolbar[a?"disable":"enable"](this)});if(B)d.body.contentEditable=!a;else d.designMode=a?"off":"on";c.textarea[0].disabled=a},createMenu:function(a){var b=this.toolbar.get(a.name),c=b.pos();a.x=c.x;a.y=c.y+b.height();a.shadowMode=u(a.shadowMode,this.shadowMode);if(a.selectedColor!==t){a.cls="ke-colorpicker-"+this.themeType;a.noColor=this.lang("noColor");this.menu=Tb(a)}else{a.cls="ke-menu-"+this.themeType;a.centerLineMode=false;this.menu=
kb(a)}return this.menu},hideMenu:function(){this.menu.remove();this.menu=null;return this},hideContextmenu:function(){this.contextmenu.remove();this.contextmenu=null;return this},createDialog:function(a){var b=this;a.shadowMode=u(a.shadowMode,b.shadowMode);a.closeBtn=u(a.closeBtn,{name:b.lang("close"),click:function(){b.hideDialog();B&&b.cmd&&b.cmd.select()}});a.noBtn=u(a.noBtn,{name:b.lang(a.yesBtn?"no":"close"),click:function(){b.hideDialog();B&&b.cmd&&b.cmd.select()}});if(b.dialogAlignType!="page")a.alignEl=
b.container;a.cls="ke-dialog-"+b.themeType;if(b.dialogs.length>0){var c=b.dialogs[b.dialogs.length-1];b.dialogs[0].setMaskIndex(c.z+2);a.z=c.z+3;a.showMask=false}a=Ub(a);b.dialogs.push(a);return a},hideDialog:function(){this.dialogs.length>0&&this.dialogs.pop().remove();this.dialogs.length>0&&this.dialogs[0].setMaskIndex(this.dialogs[this.dialogs.length-1].z-1);return this},errorDialog:function(a){var b=this.createDialog({width:750,title:this.lang("uploadError"),body:'<div style="padding:10px 20px;"><iframe frameborder="0" style="width:708px;height:400px;"></iframe></div>'});
b=g("iframe",b.div);var c=g.iframeDoc(b);c.open();c.write(a);c.close();g(c.body).css("background-color","#FFF");b[0].contentWindow.focus();return this}};_instances=[];g.remove=function(a){bc(a,function(b){this.remove();_instances.splice(b,1)})};g.sync=function(a){bc(a,function(){this.sync()})};B&&R<7&&da(document,"BackgroundImageCache",true);g.EditorClass=Ga;g.editor=Mc;g.create=ac;g.instances=_instances;g.plugin=Wb;g.lang=Yb;Wb("core",function(a){var b=this,c={undo:"Z",redo:"Y",bold:"B",italic:"I",
underline:"U",print:"P",selectall:"A"};b.afterSetHtml(function(){b.options.afterChange&&b.options.afterChange.call(b)});b.afterCreate(function(){if(b.syncType=="form"){for(var e=a(b.srcElement),f=false;e=e.parent();)if(e.name=="form"){f=true;break}if(f){e.bind("submit",function(){b.sync();a(O).bind("unload",function(){b.edit.textarea.remove()})});var h=a('[type="reset"]',e);h.click(function(){b.html(b.initContent);b.cmd.selection()});b.beforeRemove(function(){e.unbind();h.unbind()})}}});b.clickToolbar("source",
function(){if(b.edit.designMode){b.toolbar.disableAll(true);b.edit.design(false);b.toolbar.select("source")}else{b.toolbar.disableAll(false);b.edit.design(true);b.toolbar.unselect("source")}b.designMode=b.edit.designMode});b.afterCreate(function(){b.designMode||b.toolbar.disableAll(true).select("source")});b.clickToolbar("fullscreen",function(){b.fullscreen()});if(b.fullscreenShortcut){var d=false;b.afterCreate(function(){a(b.edit.doc,b.edit.textarea).keyup(function(e){e.which==27&&setTimeout(function(){b.fullscreen()},
0)});if(d){if(B&&!b.designMode)return;b.focus()}d||(d=true)})}n("undo,redo".split(","),function(e,f){c[f]&&b.afterCreate(function(){Va(this.edit.doc,c[f],function(){b.clickToolbar(f)})});b.clickToolbar(f,function(){b[f]()})});b.clickToolbar("formatblock",function(){var e=b.lang("formatblock.formatBlock"),f={h1:28,h2:24,h3:18,H4:14,p:12},h=b.cmd.val("formatblock"),i=b.createMenu({name:"formatblock",width:b.langType=="en"?200:150});n(e,function(j,k){var m="font-size:"+f[j]+"px;";if(j.charAt(0)==="h")m+=
"font-weight:bold;";i.addItem({title:'<span style="'+m+'" unselectable="on">'+k+"</span>",height:f[j]+12,checked:h===j||h===k,click:function(){b.select().exec("formatblock","<"+j+">").hideMenu()}})})});b.clickToolbar("fontname",function(){var e=b.cmd.val("fontname"),f=b.createMenu({name:"fontname",width:150});n(b.lang("fontname.fontName"),function(h,i){f.addItem({title:'<span style="font-family: '+h+';" unselectable="on">'+i+"</span>",checked:e===h.toLowerCase()||e===i.toLowerCase(),click:function(){b.exec("fontname",
h).hideMenu()}})})});b.clickToolbar("fontsize",function(){var e=b.cmd.val("fontsize"),f=b.createMenu({name:"fontsize",width:150});n(b.fontSizeTable,function(h,i){f.addItem({title:'<span style="font-size:'+i+';" unselectable="on">'+i+"</span>",height:L(i)+12,checked:e===i,click:function(){b.exec("fontsize",i).hideMenu()}})})});n("forecolor,hilitecolor".split(","),function(e,f){b.clickToolbar(f,function(){b.createMenu({name:f,selectedColor:b.cmd.val(f)||"default",colors:b.colorTable,click:function(h){b.exec(f,
h).hideMenu()}})})});n("cut,copy,paste".split(","),function(e,f){b.clickToolbar(f,function(){b.focus();try{b.exec(f,null)}catch(h){alert(b.lang(f+"Error"))}})});b.clickToolbar("about",function(){var e='<div style="margin:20px;"><div>KindEditor '+Ra+'</div><div>Copyright &copy; <a href="http://www.kindsoft.net/" target="_blank">kindsoft.net</a> All rights reserved.</div></div>';b.createDialog({name:"about",width:300,title:b.lang("about"),body:e})});b.plugin.getSelectedLink=function(){return b.cmd.commonAncestor("a")};
b.plugin.getSelectedImage=function(){return Pa(b.edit.cmd.range,function(e){return!/^ke-\w+$/i.test(e[0].className)})};b.plugin.getSelectedFlash=function(){return Pa(b.edit.cmd.range,function(e){return e[0].className=="ke-flash"})};b.plugin.getSelectedMedia=function(){return Pa(b.edit.cmd.range,function(e){return e[0].className=="ke-media"||e[0].className=="ke-rm"})};b.plugin.getSelectedAnchor=function(){return Pa(b.edit.cmd.range,function(e){return e[0].className=="ke-anchor"})};n("link,image,flash,media,anchor".split(","),
function(e,f){var h=f.charAt(0).toUpperCase()+f.substr(1);n("edit,delete".split(","),function(i,j){b.addContextmenu({title:b.lang(j+h),click:function(){b.loadPlugin(f,function(){b.plugin[f][j]();b.hideMenu()})},cond:b.plugin["getSelected"+h],width:150,iconClass:j=="edit"?"ke-icon-"+f:t})});b.addContextmenu({title:"-"})});b.plugin.getSelectedTable=function(){return b.cmd.commonAncestor("table")};b.plugin.getSelectedRow=function(){return b.cmd.commonAncestor("tr")};b.plugin.getSelectedCell=function(){return b.cmd.commonAncestor("td")};
n("prop,cellprop,colinsertleft,colinsertright,rowinsertabove,rowinsertbelow,rowmerge,colmerge,rowsplit,colsplit,coldelete,rowdelete,insert,delete".split(","),function(e,f){e=ba(f,["prop","delete"])<0?b.plugin.getSelectedCell:b.plugin.getSelectedTable;b.addContextmenu({title:b.lang("table"+f),click:function(){b.loadPlugin("table",function(){b.plugin.table[f]();b.hideMenu()})},cond:e,width:170,iconClass:"ke-icon-table"+f})});b.addContextmenu({title:"-"});n("selectall,justifyleft,justifycenter,justifyright,justifyfull,insertorderedlist,insertunorderedlist,indent,outdent,subscript,superscript,hr,print,bold,italic,underline,strikethrough,removeformat,unlink".split(","),
function(e,f){c[f]&&b.afterCreate(function(){Va(this.edit.doc,c[f],function(){b.cmd.selection();b.clickToolbar(f)})});b.clickToolbar(f,function(){b.focus().exec(f,null)})});b.afterCreate(function(){function e(){h.range.moveToBookmark(i);h.select();if(qa){a("div."+k,j).each(function(){a(this).after("<br />").remove(true)});a("span.Apple-style-span",j).remove(true);a("span.Apple-tab-span",j).remove(true);a("span[style]",j).each(function(){a(this).css("white-space")=="nowrap"&&a(this).remove(true)});
a("meta",j).remove()}var l=j[0].innerHTML;j.remove();if(l!==""){if(b.pasteType===2)if(/schemas-microsoft-com|worddocument|mso-\w+/i.test(l))l=Bb(l,b.filterMode?b.htmlTags:a.options.htmlTags);else{l=ga(l,b.filterMode?b.htmlTags:null);l=b.beforeSetHtml(l)}if(b.pasteType===1){l=l.replace(/<br[^>]*>/ig,"\n");l=l.replace(/<\/p><p[^>]*>/ig,"\n");l=l.replace(/<[^>]+>/g,"");l=l.replace(/&nbsp;/ig," ");l=l.replace(/\n\s*\n/g,"\n");l=l.replace(/ {2}/g," &nbsp;");if(b.newlineTag=="p"){if(/\n/.test(l))l=l.replace(/^/,
"<p>").replace(/$/,"</p>").replace(/\n/g,"</p><p>")}else l=l.replace(/\n/g,"<br />$&")}b.insertHtml(l,true)}}var f=b.edit.doc,h,i,j,k="__kindeditor_paste__",m=false;a(f.body).bind("paste",function(l){if(b.pasteType===0)l.stop();else if(!m){m=true;a("div."+k,f).remove();h=b.cmd.selection();i=h.range.createBookmark();j=a('<div class="'+k+'"></div>',f).css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",left:"-1981px",top:a(i.start).pos().y+"px","white-space":"nowrap"});a(f.body).append(j);
if(B){var r=h.range.get(true);r.moveToElementText(j[0]);r.select();r.execCommand("paste");l.preventDefault()}else{h.range.selectNodeContents(j[0]);h.select()}setTimeout(function(){e();m=false},0)}})});b.beforeGetHtml(function(e){return e.replace(/(<(?:noscript|noscript\s[^>]*)>)([\s\S]*?)(<\/noscript>)/ig,function(f,h,i,j){return h+Ha(i).replace(/\s+/g," ")+j}).replace(/<img[^>]*class="?ke-(flash|rm|media)"?[^>]*>/ig,function(f){f=Y(f);var h=ua(f.style||""),i=Db(f["data-ke-tag"]);i.width=u(f.width,
L(u(h.width,"")));i.height=u(f.height,L(u(h.height,"")));return Xa(i)}).replace(/<img[^>]*class="?ke-anchor"?[^>]*>/ig,function(f){f=Y(f);return'<a name="'+unescape(f["data-ke-name"])+'"></a>'}).replace(/<div\s+[^>]*data-ke-script-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(f,h,i){return"<script"+unescape(h)+">"+unescape(i)+"<\/script>"}).replace(/<div\s+[^>]*data-ke-noscript-attr="([^"]*)"[^>]*>([\s\S]*?)<\/div>/ig,function(f,h,i){return"<noscript"+unescape(h)+">"+unescape(i)+"</noscript>"}).replace(/(<[^>]*)data-ke-src="([^"]*)"([^>]*>)/ig,
function(f,h,i){f=f.replace(/(\s+(?:href|src)=")[^"]*(")/i,function(j,k,m){return k+Ha(i)+m});return f=f.replace(/\s+data-ke-src="[^"]*"/i,"")}).replace(/(<[^>]+\s)data-ke-(on\w+="[^"]*"[^>]*>)/ig,function(f,h,i){return h+i})});b.beforeSetHtml(function(e){return e.replace(/<embed[^>]*type="([^"]+)"[^>]*>(?:<\/embed>)?/ig,function(f){f=Y(f);f.src=u(f.src,"");f.width=u(f.width,0);f.height=u(f.height,0);return Eb(b.themesPath+"common/blank.gif",f)}).replace(/<a[^>]*name="([^"]+)"[^>]*>(?:<\/a>)?/ig,
function(f){var h=Y(f);if(h.href!==t)return f;return'<img class="ke-anchor" src="'+b.themesPath+'common/anchor.gif" data-ke-name="'+escape(h.name)+'" />'}).replace(/<script([^>]*)>([\s\S]*?)<\/script>/ig,function(f,h,i){return'<div class="ke-script" data-ke-script-attr="'+escape(h)+'">'+escape(i)+"</div>"}).replace(/<noscript([^>]*)>([\s\S]*?)<\/noscript>/ig,function(f,h,i){return'<div class="ke-noscript" data-ke-noscript-attr="'+escape(h)+'">'+escape(i)+"</div>"}).replace(/(<[^>]*)(href|src)="([^"]*)"([^>]*>)/ig,
function(f,h,i,j,k){if(f.match(/\sdata-ke-src="[^"]*"/i))return f;return f=h+i+'="'+j+'" data-ke-src="'+Q(j)+'"'+k}).replace(/(<[^>]+\s)(on\w+="[^"]*"[^>]*>)/ig,function(f,h,i){return h+"data-ke-"+i}).replace(/<table[^>]*\s+border="0"[^>]*>/ig,function(f){if(f.indexOf("ke-zeroborder")>=0)return f;return lc(f,"ke-zeroborder")})})})}})(window);
